/*!
 * @license
 * nanoStream H5Live Player 4.12.0
 * Build from Wed Aug 25 2021 16:04:12 GMT+0200 (GMT+02:00)
 * Copyright (c) 2014-2021 nanocosmos IT GmbH. All rights reserved.
 * http://www.nanocosmos.de
 * sales@nanocosmos.de
 *
 * LEGAL NOTICE:
 * This material is subject to the terms and conditions defined in
 * separate license conditions ('LICENSE.txt')
 * All information contained herein is, and remains the property
 * of nanocosmos GmbH and its suppliers if any. The intellectual and technical concepts
 * contained herein are proprietary to nanocosmos GmbH, and are protected by trade secret
 * or copyright law. Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained from nanocosmos.
 * All modifications will remain property of nanocosmos.
 */

/*!
 * EventEmitter v4.2.11 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */

 /*!
 * @license
 * SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject> is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */

!function(){var e={4216:function(e,t,n){var i,r;i=[n(8478),n(8197),n(2459),n(2437),n(9470),n(7884),n(3293)],void 0===(r=function(e,t,n,i,r,a,o){"use strict";function s(r){var a=!1;return new Promise((function(s,u){if(!r.source.bintu||r.source.entries&&r.source.entries.length||(r.source.entries=[{index:0,bintu:t.copy(r.source.bintu)}],r.source.h5live&&(r.source.entries[0].h5live=t.copy(r.source.h5live),delete r.source.h5live),r.source.hls&&(r.source.entries[0].hls=t.copy(r.source.hls),delete r.source.hls)),r.source.entries&&r.source.entries.length){for(var d=r.source.entries,c=0;c<d.length;c+=1){var l=d[c];if("object"==typeof l.bintu){if(!l.bintu.streamid){if(l.h5live&&(!l.h5live||l.h5live.rtmp))continue;u(new e(i.SETUP.BINTU_NO_STREAM_ID,n.SETUP.BINTU_NO_STREAM_ID))}l.bintu.apiurl||(l.bintu.apiurl="https://bintu.nanocosmos.de"),(a=a||{})[c]=new o(l.bintu.apiurl,null,null,"player"),a[c].getStream(l.bintu.streamid).then(f.bind(this,c)).catch(p)}}function f(t,o){try{var c,l=JSON.parse(o.responseText),f=l.id,E=l.playout,h=E.rtmp,m=E.hls,g=E.h5live;if(h&&!h.length&&!g||g&&!g.length)u(new e(i.SETUP.BINTU_STREAM_NOT_LIVE.replace("$streamid$",f),n.SETUP.BINTU_STREAM_NOT_LIVE));else{if(m&&m.length){var _=m[0].url;d[t].hls=_}if(g&&g.length){if(d[t].h5live=d[t].h5live||{},!d[t].h5live.server&&(d[t].h5live.server={}))for(c in g[0].server)Object.prototype.hasOwnProperty.call(g[0].server,c)&&(d[t].h5live.server[c]=g[0].server[c].replace("bintu-stream","bintu-h5live"));d[t].h5live.rtmp={},d[t].h5live.rtmp.url=g[0].rtmp.url,d[t].h5live.rtmp.streamname=g[0].rtmp.streamname}else h&&h.length&&(d[t].h5live=r.source.h5live||{},d[t].h5live.rtmp={},d[t].h5live.rtmp.url=h[0].url,d[t].h5live.rtmp.streamname=h[0].streamname)}a[t]=!1;var b=!0;for(c in a)if(Object.prototype.hasOwnProperty.call(a,c)&&!1!==a[c]){b=!1;break}b&&s(r)}catch(e){p(e)}}a||s(r)}else s(r);function p(t){"onstatuserror"===t.error?u(new e(i.SETUP.BINTU_STATUS_ERROR.replace("$status$",t.request.status),n.SETUP.BINTU_STATUS_ERROR)):t.error?u(new e(t.error)):t.message&&u(new e(t.message))}}))}return{setup:s,updateSource:function(e){return s({source:e})},emptyConfig:r,validConfig:a}}.apply(t,i))||(e.exports=r)},9470:function(e,t){var n;void 0===(n=function(){return{create:function(){return{source:{bintu:{apiurl:"",streamid:""}}}}}}.apply(t,[]))||(e.exports=n)},7884:function(e,t){var n;void 0===(n=function(){return{create:function(){return{source:{bintu:{apiurl:"string",streamid:"string"}}}}}}.apply(t,[]))||(e.exports=n)},2459:function(e,t){var n;void 0===(n=function(){return Object.freeze({SETUP:{BINTU_STREAM_NOT_LIVE:5101,BINTU_NO_STREAM_ID:5102,BINTU_STATUS_ERROR:5103}})}.apply(t,[]))||(e.exports=n)},2437:function(e,t){var n;void 0===(n=function(){return Object.freeze({SETUP:{BINTU_STREAM_NOT_LIVE:"Could not find bintu stream with id $streamid$. The stream is not live.",BINTU_NO_STREAM_ID:"No bintu stream id passed.",BINTU_STATUS_ERROR:"The bintu service rejected with http status $status$."}})}.apply(t,[]))||(e.exports=n)},3293:function(e,t){var n;(function(){"use strict";var t=function(e,t,n,i){if(!(e.length>0&&("string"==typeof e||e instanceof String)))throw new Error('The param "apiUrl" must be of type "string" and also may not be empty string.');if(this.apiUrl=e,t&&("string"==typeof t||t instanceof String)&&(this.apiKey=t),n&&("string"==typeof n||n instanceof String)&&(this.playerKey=n),i&&("string"==typeof i||i instanceof String)){if("api"!==i&&"player"!==i)throw new Error('The param "keyMode" must be "api", "player" or undefined');this.keyMode=i}},i=t.prototype,r=function(e,t,n,i){this.method=e||"GET",this.url=t||"http://localhost:8088",this.header=n||{},this.async=i||!0,this.Send=function(e){return new Promise(function(t,n){var i=new XMLHttpRequest;for(var r in i.open(this.method,this.url,this.async),this.header)Object.prototype.hasOwnProperty.call(this.header,r)&&i.setRequestHeader(r,this.header[r]);if(i.onreadystatechange=function(){return 4===i.readyState&&200===i.status?t(i):4===i.readyState&&200!==i.status?n({error:"onstatuserror",request:i}):void 0},i.onabort=function(){return n({error:"onabort",request:i})},i.onerror=function(){return n({error:"onerror",request:i})},i.ontimeout=function(){return n({error:"ontimeout",request:i})},void 0!==e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){return e=null,n({error:"invalid json string",request:i})}if("object"==typeof e)try{e=JSON.stringify(e),i.send(e)}catch(e){return n({error:"invalid json object",request:i})}}else i.send()}.bind(this))}};i.apiKey=null,i.apiUrl=null,i.playerKey=null,i.keyMode="api",i.createStream=function(e,t,n){return new Promise(function(i,a){if(!this.apiUrl)return a({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey)return a({error:"no api key set",request:{responseText:"no response error"}});if("api"!==this.keyMode)return a({error:"wrong key mode set",request:{responseText:"no response error"}});var o=new r("POST",this.apiUrl+"/stream");o.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey};var s={webrtc:!!e,transcoding:!!t};return"object"==typeof n&&"function"==typeof n.push&&n.length>0&&("string"==typeof n[0]||n[0]instanceof String)&&(s.tags=n),o.Send(s).then(i).catch(a)}.bind(this))},i.getStream=function(e){return new Promise(function(t,n){if(!this.apiUrl)return n({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey&&"api"===this.keyMode)return n({error:"no api key set",request:{responseText:"no response error"}});var i=new r("GET",this.apiUrl+"/stream/"+e);return i.header="api"===this.keyMode&&this.apiKey?{Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey}:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},i.Send().then(t).catch(n)}.bind(this))},i.getStreams=function(e){return new Promise(function(n,i){if(!this.apiUrl)return i({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey&&"api"===this.keyMode)return i({error:"no api key set",request:{responseText:"no response error"}});if(!this.playerKey&&"player"===this.keyMode)return i({error:"no player key set",request:{responseText:"no response error"}});var a=this.apiUrl+"/stream";if(e instanceof t.StreamFilter){if(0===e.tags.length&&"player"===this.keyMode)return i({error:"no tags set",request:{responseText:"no response error"}});a+=e.getQueryString()}var o=new r("GET",a);return o.header="api"===this.keyMode?{Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey}:{Accept:"application/json","Content-Type":"application/json","X-BINTU-PLAYERKEY":this.playerKey},o.Send().then(n).catch(i)}.bind(this))},i.tagStream=function(e,t){return new Promise(function(n,i){if(!this.apiUrl)return i({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey)return i({error:"no api key set",request:{responseText:"no response error"}});if("api"!==this.keyMode)return i({error:"wrong key mode set",request:{responseText:"no response error"}});if(!e)return i({error:"no stream id set"});var a=new r("PUT",this.apiUrl+"/stream/"+e+"/tag");return a.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey},"object"==typeof t&&"function"==typeof t.push&&t.length>0&&("string"==typeof t[0]||t[0]instanceof String)?a.Send({tags:t}).then(n).catch(i):a.Send().then(n).catch(i)}.bind(this))},i.pushStream=function(e,t){return new Promise(function(n,i){if(!this.apiUrl)return i({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey)return i({error:"no api key set",request:{responseText:"no response error"}});if("api"!==this.keyMode)return i({error:"wrong key mode set",request:{responseText:"no response error"}});if(!e)return i({error:"no stream id set"});var a=new r("PUT",this.apiUrl+"/stream/"+e+"/push_url");return a.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey},a.Send({url:t}).then(n).catch(i)}.bind(this))},i=(t.StreamFilter=function(){this.state=this.setState(t.StreamFilter.STATE.ALL),this.tags=[]}).prototype,t.StreamFilter.STATE=Object.create({LIVE:"live",CREATED:"created",ENDED:"ended",ALL:null}),i.setState=function(e){var n;for(var i in t.StreamFilter.STATE)t.StreamFilter.STATE[i]===e&&(n=t.StreamFilter.STATE[i]);if(void 0===n)throw new Error('The param "state" must be of type "Bintu.StreamFilter.STATE"');return this.state=n,this},i.addTag=function(e){if(!(e.length>0&&("string"==typeof e||e instanceof String)))throw new Error('The param "tag" must be of type "string" and also may not be empty string.');return this.tags.push(e),this.tags=this._reduceDuplicates(this.tags),this},i.addTags=function(e){if("object"!=typeof e||"function"!=typeof e.push||!(0===e.length||e.length>0&&("string"==typeof e[0]||e[0]instanceof String)))throw new Error('The param "tags" must be of type "string array"');return this.tags=this.tags.concat(e),this.tags=this._reduceDuplicates(this.tags),this},i.getQueryString=function(){var e="";if("object"==typeof this.tags&&"function"==typeof this.tags.push&&this.tags.length>0)for(var t=0;t<this.tags.length;t+=1)"string"==typeof this.tags[t]&&(e+=0===t?"?":"&",e+="tags[]="+this.tags[t]);return"string"==typeof this.state&&this.state.length>0&&(e+=-1===e.indexOf("?")?"?":"&",e+="state="+this.state),e},i._reduceDuplicates=function(e){if("object"!=typeof e||"function"!=typeof e.push||!(0===e.length||e.length>0&&("string"==typeof e[0]||e[0]instanceof String)))throw new Error('The param "tags" must be of type "string array"');return e.reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[])},void 0===(n=function(){return t}.apply(this,[]))||(e.exports=n)}).call(this)},6965:function(e,t){var n;void 0===(n=function(){return{create:function(){return{playback:{autoplay:!0,automute:!1,muted:!1,metadata:!1,forceTech:"",flashplayer:"",videoId:"",keepConnection:!1,allowSafariHlsFallback:!1,crossOrigin:"not-set",mediaErrorRecoveries:3,reconnect:{minDelay:2,maxDelay:10,delaySteps:10,maxRetries:10},timeouts:{loading:20,buffering:20,connecting:5}},source:{hls:"",h5live:{server:{websocket:"",progressive:"",hls:""},token:"",rtmp:{url:"",streamname:""},security:{token:"",expires:"",options:"",tag:""},params:{}},bintu:{},startIndex:0,options:{switch:{},adaption:{}},entries:[]},events:{onReady:void 0,onPlay:void 0,onPause:void 0,onLoading:void 0,onStartBuffering:void 0,onStopBuffering:void 0,onError:void 0,onMetaData:void 0,onStats:void 0,onMute:void 0,onUnmute:void 0,onVolumeChange:void 0,onStreamInfo:void 0,onStreamInfoUpdate:void 0,onWarning:void 0,onDestroy:void 0,onUpdateSourceInit:void 0,onUpdateSourceSuccess:void 0,onUpdateSourceFail:void 0,onUpdateSourceAbort:void 0,onSwitchStreamInit:void 0,onSwitchStreamSuccess:void 0,onSwitchStreamFail:void 0,onSwitchStreamAbort:void 0},tweaks:{buffer:{min:void 0,start:void 0,max:void 0,target:void 0,limit:void 0},bufferDynamic:{offsetThreshold:void 0,offsetStep:void 0,cooldownTime:void 0}}}}}}.apply(t,[]))||(e.exports=n)},1493:function(e,t){var n;void 0===(n=function(){return{create:function(){return{index:0,label:"high",tag:"high res",info:{bitrate:0,width:0,height:0,framerate:0},hls:"",h5live:{server:{websocket:"",progressive:"",hls:""},token:"",rtmp:{url:"",streamname:""},params:{},security:{token:"",expires:"",options:"",tag:""}},bintu:{}}}}}.apply(t,[]))||(e.exports=n)},828:function(e,t){var n;void 0===(n=function(){return{create:function(){return{index:"number",label:"string",tag:"string",info:{bitrate:"number",width:"number",height:"number",framerate:"number"},hls:"string",h5live:{server:{websocket:"string",progressive:"string",hls:"string"},token:"string",rtmp:{url:"string",streamname:"string"},params:"object",security:{token:"string",expires:"string",options:"string",tag:"string"}},bintu:"object"}}}}.apply(t,[]))||(e.exports=n)},5055:function(e,t,n){var i,r;i=[n(6637)],void 0===(r=function(e){return{create:function(t,n,i){var r,a={};function o(e){a[e.name]&&a[e.name].forEach((function(t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);n.emit(t,i)}))}return r=[],i.forEach((function(e){r.push({type:e.from,listener:o}),a[e.from]||(a[e.from]=[]),a[e.from].push(e.to)})),e.add({target:t,listeners:r}),{destroy:function(){e.remove({target:t,listeners:r}),r=null,a=null}}}}}.apply(t,i))||(e.exports=r)},1969:function(e,t,n){var i,r;i=[n(9658)],void 0===(r=function(e){"use strict";function t(){this.version=void 0,this.type=void 0}var n=t.prototype=Object.create(e.prototype);return n.setup=function(){throw new Error('"setup" must be implemented or player not initialized')},n.destroy=function(){throw new Error('"destroy" must be implemented or player not initialized')},n.play=function(){throw new Error('"play" must be implemented or player not initialized by call setup')},n.pause=function(){throw new Error('"pause" must be implemented or player not initialized by call setup')},n.mute=function(){throw new Error('"mute" must be implemented or player not initialized by call setup')},n.unmute=function(){throw new Error('"unmute" must be implemented or player not initialized by call setup')},n.setVolume=function(){throw new Error('"setVolume" must be implemented or player not initialized by call setup')},n.updateSource=function(){throw new Error('"updateSource" must be implemented or player not initialized by call setup')},n.switchStream=function(){throw new Error('"switchStream" must be implemented or player not initialized by call setup')},n.setAdaption=function(){throw new Error('"setAdaption" must be implemented or player not initialized by call setup')},t.isSupported=function(){return!1},t.supportedTechniques=[],t}.apply(t,i))||(e.exports=r)},6637:function(e,t,n){var i,r;i=[n(939)],void 0===(r=function(e){"use strict";var t=["addEventListener","addListener","on"],n=["removeEventListener","removeListener","off"];function i(e,t){for(var n=0;n<t.length;++n)if("function"==typeof e[t[n]])return e[t[n]];return null}function r(r,a){!function(r){if(!r.target)throw new Error(e.NO_TARGET);if(!r.listeners||!r.listeners.length)throw new Error(e.NO_LISTENERS);if(!i(r.target,t)||!i(r.target,n))throw new Error(e.NOT_DISPATCHER);for(var a=0;a<r.listeners.length;++a)if(!r.listeners[a].type&&"string"!=typeof r.listeners[a].type||0!==r.listeners[a].type.length){if(!r.listeners[a].type)throw new Error(e.MISSING_TYPE.replace("%index%",a));if("function"!=typeof r.listeners[a].listener)throw new Error(e.MISSING_LISTENER.replace("%index%",a))}else r.listeners.splice(a,1),a--}(a),function(e,t,n){for(var i=0;i<n.length;++i)e.call(t,n[i].type,n[i].listener)}(i(a.target,r),a.target,a.listeners)}return{add:r.bind(null,t),remove:r.bind(null,n)}}.apply(t,i))||(e.exports=r)},8544:function(e,t,n){var i,r;i=[n(1933),n(8478),n(9775),n(182),n(3284),n(3778)],void 0===(r=function(e,t,n,i,r,a){return{create:function(e,o){return new Promise((function(s,u){var d=n;try{s(function(e,t){return new(0,e[0])(t)}(d=function(e,n){var r=[],o=e.filter((function(e){r=r.concat(e.supportedTechniques);var t=!1;return e.supportedTechniques.forEach((function(e){var i,r;!1===t&&(t=!n.playback.forceTech||(i=e,r=n.playback.forceTech,-1!==i.indexOf(r)||-1!==r.indexOf(i)))})),t}));if(!o.length)throw new t(i.FORCE_NOT_SUPPORTED.replace("$tech$",n.playback.forceTech),a.SETUP.FORCE_NOT_SUPPORTED);return o}(d=function(e,n){var o={};o[r.H5LIVE_WSS]="h5live",o[r.H5LIVE_HLS]="h5live",o[r.FLASH]="h5live",o[r.NATIVE]="hls";var s=[],u=e.filter((function(e){var t=!1;return e.supportedTechniques.forEach((function(e){s.push(o[e]),!1===t&&(t=Object.prototype.hasOwnProperty.call(n,"source")&&(Object.prototype.hasOwnProperty.call(n.source,o[e])||function(e,t){if(!Object.prototype.hasOwnProperty.call(e.source,"entries")||!e.source.entries.length)return!1;var n=!0;return e.source.entries.forEach((function(e){Object.prototype.hasOwnProperty.call(e,t)||(n=!1)})),n}(n,o[e])))})),t}));if(!u.length)throw new t(i.SOURCE_NOT_SUPPORTED,a.SETUP.SOURCE_NOT_SUPPORTED);return u}(d=function(e){var n=e.filter((function(e){return e.isSupported()}));if(!n.length)throw new t(i.CLIENT_NOT_SUPPORTED,a.SETUP.CLIENT_NOT_SUPPORTED);return n}(d),o),o),e))}catch(e){u(e)}}))},capabilities:(o=[],n.filter((function(e){return e.isSupported()})).forEach((function(e){o=o.concat(e.supportedTechniques)})),o)};var o}.apply(t,i))||(e.exports=r)},9775:function(e,t,n){var i,r;i=[n(1128),n(1128),n(8985),n(6722)],void 0===(r=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e}.apply(t,i))||(e.exports=r)},5810:function(e,t){var n;void 0===(n=function(){return{create:function(){return{source:{hls:"string",h5live:{server:{websocket:"string",progressive:"string",hls:"string"},token:"string",rtmp:{url:"string",streamname:"string"},params:"object",security:{token:"string",expires:"string",options:"string",tag:"string"}},bintu:"object",startIndex:"number",options:"object",entries:"object"},playback:{autoplay:"boolean",automute:"boolean",muted:"boolean",forceTech:"string",metadata:"boolean",flashplayer:"string",videoId:"*",keepConnection:"boolean",allowSafariHlsFallback:"boolean",crossOrigin:"string",mediaErrorRecoveries:"number",reconnect:{minDelay:"number",maxDelay:"number",delaySteps:"number",maxRetries:"number"},timeouts:{loading:"number",buffering:"number",connecting:"number"}},events:{onReady:"function",onPlay:"function",onPause:"function",onLoading:"function",onStartBuffering:"function",onStopBuffering:"function",onError:"function",onMetaData:"function",onStats:"function",onMute:"function",onUnmute:"function",onVolumeChange:"function",onStreamInfo:"function",onStreamInfoUpdate:"function",onWarning:"function",onDestroy:"function",onUpdateSourceInit:"function",onUpdateSourceSuccess:"function",onUpdateSourceFail:"function",onUpdateSourceAbort:"function",onSwitchStreamInit:"function",onSwitchStreamSuccess:"function",onSwitchStreamFail:"function",onSwitchStreamAbort:"function"},tweaks:{buffer:{max:"number",min:"number",start:"number",target:"number",limit:"number"},bufferDynamic:{offsetThreshold:"number",offsetStep:"number",cooldownTime:"number"}}}}}}.apply(t,[]))||(e.exports=n)},1313:function(e,t){var n;void 0===(n=function(){return Object.freeze({CONFIG_RTMP:"Configuration error. Could not create player, the rtmp configuration is missing or incomplete. Add an rtmp url and streamname to the configuration.",CONFIG_TOKEN:"Configuration error. Could not create player, with this configuration an security token is required. Add an token to the configuration.",CONFIG_WSS:"Configuration error. Could not create player, the websocket server configuration is missing.",CONFIG_HLS:"Configuration error. Could not create player, the hls server configuration is missing.",CONFIG_METADATA:"Configuration error. Could not create player, the websocket server configuration for metadata is missing.",CONFIG_SOURCE:"The players source configuration is malformed or missing, please check documentation for more information or contact us."})}.apply(t,[]))||(e.exports=n)},3778:function(e,t){var n;void 0===(n=function(){return Object.freeze({PLAYER:{NO_RTMP_URL_SET:1001,NO_SERVER_SET:1002,NOT_CONFIGURED:1003,NOT_PLAYING:1004,INTERACTION_REQUIRED:1005,BUFFER_CONFIG_INVALID:1006,PLAYBACK_SUSPENDED:1007,PLAYBACK_ERROR:1008,VISIBILITY_HIDDEN:1009,INVALID_ENTRY_INDEX:1010},STREAM:{NOT_FOUND:2001,MEDIA_NOT_AVAILABLE:2002,NOT_ENOUGH_DATA:2003,SOURCE_STOPPED:2004,METADATA_STILL_PROCESSING:2014,METADATA_NO_START_INDEX:2013,METADATA_INVALID_JSON:2012,METADATA_WRONG_INDEX:2011},MEDIA:{ABORTED:3001,DOWNLOAD_ERROR:3002,DECODE_ERROR:3003,NOT_SUPPORTED:3004,MEDIA_SOURCE_ENDED:3100,UNSPECIFIC_ERROR:3200},NETWORK:{COULD_NOT_ESTABLISH_CONNECTION:4001,CONNECTION_ERROR:4002,MAX_RECONNECTS_REACHED:4003,RECONNECTION_CONFIG_INVALID:4004,SOURCE_STREAM_STOPPED:4005,SOURCE_TIMEOUT:4006},SETUP:{EXCEPTION:5001,CLIENT_NOT_SUPPORTED:5002,FORCE_NOT_SUPPORTED:5003,SOURCE_NOT_SUPPORTED:5004,CONFIG_RTMP:5005,CONFIG_TOKEN:5006,CONFIG_WSS:5007,CONFIG_HLS:5008,CONFIG_METADATA:5009,EMBED_PLAYER:5010}})}.apply(t,[]))||(e.exports=n)},3890:function(e,t){var n;void 0===(n=function(){return Object.freeze({PLAYER:{VISIBILITY_HIDDEN:"Playback failed because the player was in visibility state 'hidden' at load start.",INVALID_ENTRY_INDEX:"The given stream entry index is not valid."},STREAM:{NOT_FOUND:"The requested stream can not be found.",MEDIA_NOT_AVAILABLE:"No media available.",NOT_ENOUGH_DATA:"Not enough media data received.",SOURCE_STOPPED:"The source stream has been stopped."},MEDIA:{ABORTED:"A fetching process of the media aborted by user.",DOWNLOAD_ERROR:"An error occurred when downloading media.",DECODE_ERROR:"An error occurred when decoding media.",NOT_SUPPORTED:"The received audio/video is not supported.",MEDIA_SOURCE_ENDED:"The media source extension changed the state to 'ended'."},NETWORK:{SOURCE_STREAM_STOPPED:"The requested source stream has been stopped.",SOURCE_TIMEOUT:"The source request was aborted by timeout."}})}.apply(t,[]))||(e.exports=n)},9583:function(e,t){var n;void 0===(n=function(){return Object.freeze({READY:"Ready",ERROR:"Error",PAUSE:"Pause",LOADING:"Loading",START_BUFFERING:"StartBuffering",STOP_BUFFERING:"StopBuffering",PLAY:"Play",METADATA:"MetaData",STATS:"Stats",PLAYBACK_FINISHED:"PlaybackFinished",MEDIA:"Media",STREAM_INFO:"StreamInfo",STREAM_INFO_UPDATE:"StreamInfoUpdate",MUTE:"Mute",UNMUTE:"Unmute",VOLUME_CHANGE:"VolumeChange",STATE_CHANGE:"StateChange",WARNING:"Warning",DESTROY:"Destroy",UPDATE_SOURCE_INIT:"UpdateSourceInit",UPDATE_SOURCE_SUCCESS:"UpdateSourceSuccess",UPDATE_SOURCE_FAIL:"UpdateSourceFail",UPDATE_SOURCE_ABORT:"UpdateSourceAbort",SWITCH_STREAM_INIT:"SwitchStreamInit",SWITCH_STREAM_SUCCESS:"SwitchStreamSuccess",SWITCH_STREAM_FAIL:"SwitchStreamFail",SWITCH_STREAM_ABORT:"SwitchStreamAbort",SERVER_INFO:"ServerInfo"})}.apply(t,[]))||(e.exports=n)},182:function(e,t){var n;void 0===(n=function(){return{FORCE_NOT_SUPPORTED:'The forced tech "$tech$" is not supported by your browser.',SOURCE_NOT_SUPPORTED:"The players source configuration is malformed or missing, please check documentation for more information or contact us.",CLIENT_NOT_SUPPORTED:"This browser does not fully support HTML5 and H5Live.            Supported are: Chrome >=54 (Windows, MacOSX, Android), Firefox >=48 (Windows, MacOSX, Android), Microsoft Edge (Windows), Microsoft Internet Explorer 11 (at least Windows 8), Safari (MacOSX & at least iOS 10)."}}.apply(t,[]))||(e.exports=n)},166:function(e,t){var n;void 0===(n=function(){return Object.freeze({EMBED_PLAYER:'Could not embed player. Please check the path to the player in the config param "playback.flashplayer" or copy to base directory.'})}.apply(t,[]))||(e.exports=n)},8656:function(e,t){var n;void 0===(n=function(){return Object.freeze({VIDEO_DISPLAY:{CONNECTION_ERROR:"connectionError",LOADING:"loading",PLAYING:"playing",REWINDING:"rewinding",BUFFERING:"buffering",STOPPED:"stopped",DISCONNECTED:"disconnected"},NET_STREAM:{PLAY:{RESET:"NetStream.Play.Reset",UNPUBLISH_NOTIFY:"NetStream.Play.UnpublishNotify",PUBLISH_NOTIFY:"NetStream.Play.PublishNotify",PLAY:"NetStream.Play.Start",STOP:"NetStream.Play.Stop",STREAM_NOT_FOUND:"NetStream.Play.StreamNotFound"}}})}.apply(t,[]))||(e.exports=n)},939:function(e,t){var n;void 0===(n=function(){return Object.freeze({NO_TARGET:"No target in config",NO_LISTENERS:"No listeners in config",NOT_DISPATCHER:"Target is not an event dispatcher",MISSING_TYPE:"Missing type in listener #%index%",MISSING_LISTENER:"Missing/invalid listener in listener #%index%"})}.apply(t,[]))||(e.exports=n)},8730:function(e,t){var n;void 0===(n=function(){return Object.freeze({MP4:"video/mp4",MP4_MS:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',HLS:"application/vnd.apple.mpegURL"})}.apply(t,[]))||(e.exports=n)},8405:function(e,t){var n;void 0===(n=function(){return Object.freeze({UNINITIALIZED:1,CONNECTING:2,OPEN:3,CLOSING:4,CLOSED:5})}.apply(t,[]))||(e.exports=n)},5493:function(e,t){var n;void 0===(n=function(){return Object.freeze({NORMAL:"normal",BUFFER:"buffer",CONNECTION_CLOSE:"connectionclose",SERVER_NOT_FOUND:"servernotfound",STREAM_NOT_FOUND:"streamnotfound",INTERACTION_REQUIRED:"interactionrequired",PLAYBACK_SUSPENDED:"playbacksuspended",PLAYBACK_ERROR:"playbackerror",RECONNECTION_IMMINENT:"reconnectionimminent",DESTROY:"destroy",PLAYBACK_RESTART:"playbackrestart",VISIBILITY_HIDDEN:"visibilityhidden",NOT_ENOUGH_DATA:"notenoughdata",SOURCE_STREAM_STOPPED:"sourcestreamstopped"})}.apply(t,[]))||(e.exports=n)},492:function(e,t){var n;void 0===(n=function(){return Object.freeze({UNINITIALIZED:1,IDLE:2,READY:3,LOADING:4,PLAYING:5,PAUSED:6,BUFFERING:7,UNKNOWN:8,PLAYBACK_NOT_STARTED:9,PLAYBACK_SUSPENDED:10,PAUSING:11,PLAYBACK_ERROR:12,RECONNECTION_IMMINENT:13,CONNECTION_ERROR:14,DESTROYING:15,PLAYBACK_RESTARTING:16,VISIBILITY_HIDDEN:17,NOT_ENOUGH_DATA:18,SOURCE_STREAM_STOPPED:19})}.apply(t,[]))||(e.exports=n)},7605:function(e,t){var n;void 0===(n=function(){return Object.freeze({HAVE_VIDEO:"haveVideo",HAVE_AUDIO:"haveAudio",VIDEO_INFO:"videoInfo",AUDIO_INFO:"audioInfo",PREROLL_DURATION:"prerollDuration",MIME_TYPE:"mimeType"})}.apply(t,[]))||(e.exports=n)},3284:function(e,t){var n;void 0===(n=function(){return Object.freeze({FLASH:"flash",NATIVE:"hls.native",H5LIVE_WSS:"h5live",H5LIVE_HLS:"h5live.hls"})}.apply(t,[]))||(e.exports=n)},2682:function(e,t){var n;void 0===(n=function(){return{CORE:"4.12.0"}}.apply(t,[]))||(e.exports=n)},728:function(e,t){var n;void 0===(n=function(){return Object.freeze({1e3:"Normal closure, meaning that the purpose for which the connection was established has been fulfilled.",1001:'An endpoint is "going away", such as a server going down or a browser having navigated away from a page.',1002:"An endpoint is terminating the connection due to a protocol error",1003:"An endpoint is terminating the connection because it has received a type of data it cannot accept (e.g., an endpoint that understands only text data MAY send this if it receives a binary message).",1004:"Reserved. The specific meaning might be defined in the future.",1005:"No status code was actually present.",1006:"Maybe no network, wrong url or server down.",1007:"An endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [http://tools.ietf.org/html/rfc3629] data within a text message).",1008:'An endpoint is terminating the connection because it has received a message that "violates its policy". This reason is given either if there is no other sutible reason, or if there is a need to hide specific details about the policy.',1009:"An endpoint is terminating the connection because it has received a message that is too big for it to process.",1011:"A server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.",1015:"The connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified).",4005:"The requested source stream has been stopped.",4400:"Bad request. Maybe stream parameters are missing or malformed.",4403:"Access denied. The authentication token is missing or invalid.",4500:"The connection has been rejected due an internal server error.",4503:"The requested service is currently unavailable.",4900:"The security service has been rejected due an internal server error.",4901:"The security service denied access. The authentication token is invalid.",4903:"The security service denied access. The url is expired or a token parameter is missing (expires, token, or options).",4904:"The security service can not be found."})}.apply(t,[]))||(e.exports=n)},2556:function(e,t){var n;void 0===(n=function(){return{create:function(){return{metrics:{accountId:void 0,accountKey:void 0,userId:"",eventId:"",statsInterval:10,customField1:void 0,customField2:void 0,customField3:void 0,customField4:void 0,customField5:void 0,customField6:void 0,customField7:void 0,customField8:void 0,customField9:void 0,customField10:void 0}}}}}.apply(t,[]))||(e.exports=n)},7982:function(e,t){var n;void 0===(n=function(){return{create:function(){return{metrics:{accountId:"string",accountKey:"string",userId:"string",eventId:"string",statsInterval:"number",customField1:"*",customField2:"*",customField3:"*",customField4:"*",customField5:"*",customField6:"*",customField7:"*",customField8:"*",customField9:"*",customField10:"*"}}}}}.apply(t,[]))||(e.exports=n)},9914:function(e,t){var n;void 0===(n=function(){return Object.freeze({SETUP:{METRICS_NO_OBJECT:5201,METRICS_NOT_OBJECT:5202,METRICS_EMPTY_OBJECT:5203,METRICS_INDEX_INVALID:5204,METRICS_INDEX_INCORRECT:5205,METRICS_INDEX_RANGE:5206,METRICS_PROPERTY_INVALID:5207,METRICS_NO_CREDENTIALS:5208}})}.apply(t,[]))||(e.exports=n)},5999:function(e,t){var n;void 0===(n=function(){return Object.freeze({METRICS_NO_OBJECT:"Metrics configuration error. No metrics config object passed.",METRICS_NOT_OBJECT:"Metrics configuration error. Metrics config is not from type 'object'.",METRICS_EMPTY_OBJECT:"Metrics configuration error. Metrics config is empty.",METRICS_INDEX_INVALID:"Metrics configuration error. The custom property '$key$' has no valid index number, the range is 1 to 10 e.g. 'customField1'.",METRICS_INDEX_INCORRECT:"Metrics configuration error. The custom property '$key$' is not indexed correctly, the range is 1 to 10 e.g. 'customField1'.",METRICS_INDEX_RANGE:"Metrics configuration error. The custom property '$key$' has an index out of range, the range is 1 to 10 e.g. 'customField1'.",METRICS_PROPERTY_INVALID:"Metrics configuration error. The property '$key$' is not valid.",METRICS_NO_CREDENTIALS:"Metrics configuration error. No credentials passed."})}.apply(t,[]))||(e.exports=n)},27:function(e,t,n){var i,r;i=[n(7080)],void 0===(r=function(e){return{create:function(){var t,n=e.create(),i="statsAdaptive",r={},a={deviationOfMean:{buffer:{delay:{bufferDelaysArithmeticMeans:{calcArrayStats:!0},bufferDelaysStandardDeviations:{calcArrayStats:!0}}}},deviationOfMean2:{buffer:{delay:{bufferDelaysArithmeticMeans:{calcArrayStats:!0},bufferDelaysStandardDeviations:{calcArrayStats:!0}}}}};function o(e){if(Array.isArray(e)&&e.length){for(var t,n=e.length,i=e[0],r=e[0],a=e[0],o=1;o<n;o++)e[o]<i&&(i=e[o]),e[o]>r&&(r=e[o]),a+=e[o];return t=a/n,{min:isNaN(i)?i:i.toFixed(3),max:isNaN(r)?r:r.toFixed(3),avg:isNaN(t)?t:t.toFixed(3),count:n}}return{}}function s(e,t){for(var n in t){if(!e[n])return;Object.prototype.hasOwnProperty.call(t[n],"calcArrayStats")?r[n]=t[n].calcArrayStats?o(e[n]):e[n]:s(e[n],t[n])}}return{setStats:function(e){e&&e.data&&e.data.stats&&e.data.stats.adaptive&&(t=e.data.stats.adaptive)},getStatsFlat:function(){var e=t&&Object.keys(t).length?Object.keys(t)[0]:"";return Object.prototype.hasOwnProperty.call(a,e)?(s(t[e],a[e]),n.get(r,i,5)):n.get(t,i,5)}}}}}.apply(t,i))||(e.exports=r)},3932:function(e,t){var n;void 0===(n=function(){return{create:function(){var e=0,t=0,n=[],i={buffering_duration_current:0,buffering_duration_average:0,buffering_duration_total:0,buffering_count:0};return{start:function(){e=performance.now()},end:function(){t=performance.now()},measure:function(r,a){if(e&&t&&t>e){var o=Math.round(Math.abs(t-e))/1e3;if(t=e=0,o>=1&&o<=a.time_elapsed){for(var s in n.push(o),i.buffering_duration_current=o,i.buffering_duration_total+=o,i.buffering_count+=1,i.buffering_duration_average=Math.round(i.buffering_duration_total/i.buffering_count*1e3)/1e3,i)!/buffering_count/.test(s)&&i[s];return i}}return!1},reset:function(r,a){if(r&&a){for(t=e=0;n.length;)n.pop();var o={};for(var s in i)!/buffering_duration_current/.test(s)&&(o[s]=i[s]),i[s]=0;return o.time_played_total=a.time_played,o.time_elapsed_total=a.time_elapsed,o.time_buffering_total=o.buffering_duration_total,o}}}}}}.apply(t,[]))||(e.exports=n)},4815:function(e,t){var n;void 0===(n=function(){return{create:function(){return{measure:function(e){return{error_code:e.data.code,error_message:e.data.message}}}}}}.apply(t,[]))||(e.exports=n)},4245:function(e,t){var n;void 0===(n=function(){return{create:function(){return{measure:function(e){return{pause_reason:e.data.reason}}}}}}.apply(t,[]))||(e.exports=n)},2247:function(e,t){var n;void 0===(n=function(){return{create:function(){var e=0,t=0,n=0;function i(){e=performance.now()}function r(){t=performance.now(),n+=Math.abs(t-e),e=0,t=0}return{measure:function(e){i();var t,n={connecting:0,connected:0,firstFragmentReceived:0,firstFrameRendered:0,playable:0,playing:0};try{if(e.data&&e.data.stats&&"object"==typeof e.data.stats){var r=e.data.stats;for(t in n)Object.prototype.hasOwnProperty.call(r,t)&&"number"==typeof r[t]&&(n[t]=r[t])}}catch(e){}var a={};return[{start:"connecting",end:"connecting",measurement:"play_connecting",value:0},{start:"connecting",end:"connected",measurement:"play_connected",value:0},{start:"connected",end:"firstFragmentReceived",measurement:"play_first_fragment_received",value:0},{start:"firstFragmentReceived",end:"firstFrameRendered",measurement:"play_first_frame_rendered",value:0},{start:"firstFrameRendered",end:"playable",measurement:"play_playable",value:0},{start:"playable",end:"playing",measurement:"play_playing",value:0}].forEach((function(e){var t=n[e.start],i=n[e.end];i-t>=0&&(e.value=Math.floor(i-t)),a[e.measurement+"_relative"]=e.value,a[e.measurement+"_absolute"]=n[e.end]})),a.play_start_time_total=a.play_playing_absolute,a},setTimePlayingStateStart:i,setTimePlayingStateEnd:r,getTimePlayingStateTotal:function(){return e&&!t&&r(),Math.round(n/1e3*100)/100},resetTimePlayingStateSubtotal:function(){n=0}}}}}.apply(t,[]))||(e.exports=n)},7666:function(e,t,n){var i,r;i=[n(7080)],void 0===(r=function(e){return{create:function(){var t=e.create();return{measure:function(e){return t.get(e.data,"ready",10,!0)}}}}}.apply(t,i))||(e.exports=r)},2381:function(e,t,n){var i,r;i=[n(7080)],void 0===(r=function(e){return{create:function(){var t=e.create(),n={};return{measure:function(e){return{server_info_server_application_name:(n=e.data.serverInfo).serverApplicationName,server_info_server_application_version:n.serverApplicationVersion,server_info_hostname:n.hostname}},getFlat:function(){return t.get(n,"serverInfo",5)}}}}}.apply(t,i))||(e.exports=r)},1025:function(e,t,n){var i,r;i=[n(7080),n(8197)],void 0===(r=function(e,t){return{create:function(){var n=e.create(),i={SwitchStreamInit:{removeKeys:["source"]},SwitchStreamSuccess:{removeKeys:["source"],evaluateSwitch:!0},SwitchStreamAbort:{removeKeys:["source"]},SwitchStreamFail:{removeKeys:["source"]},UpdateSourceInit:{removeKeys:["source"]},UpdateSourcAbort:{removeKeys:["source"]},UpdateSourceFail:{removeKeys:["source"]}},r={up:0,down:0,direct:0};return{handleEvent:function(e){var a,o;return!!function(e){return e&&e.data&&e.name}(e)&&(a=e.name,o=t.copy(e.data),Object.prototype.hasOwnProperty.call(i,a)&&Object.prototype.hasOwnProperty.call(i[a],"removeKeys")&&i[a].removeKeys.length&&function(e,t){for(var n=0;n<t.length;n++)Object.prototype.hasOwnProperty.call(e,t[n])&&delete e[t[n]]}(o,i[a].removeKeys),Object.prototype.hasOwnProperty.call(i,a)&&Object.prototype.hasOwnProperty.call(i[a],"evaluateSwitch")&&i[a].evaluateSwitch&&function(e){e&&e.type&&Object.keys(r).includes(e.type)&&(r[e.type]+=1)}(o),n.get(o,"e",5,!0))},getSwitchCountFlat:function(){var e=0,t={};return Object.keys(r).forEach((function(n){e+=r[n],t[n]=r[n]})),t.total=e,n.get(t,"switches",2,!0)},resetSwitchCount:function(){Object.keys(r).forEach((function(e){r[e]=0}))}}}}}.apply(t,i))||(e.exports=r)},9555:function(e,t){var n;void 0===(n=function(){return{create:function(e){var t=10;e&&!isNaN(e)&&e>=1&&(t=e);var n=10*t,i=0,r=[],a=[],o=[],s={stats_buffer_average:0,stats_buffer_min:0,stats_buffer_max:0,stats_bitrate_average:0,stats_bitrate_min:0,stats_bitrate_max:0,stats_frame_rate_average:0,stats_frame_rate_min:0,stats_frame_rate_max:0,stats_quality_dropped_video_frames:0,stats_quality_dropped_video_frames_current:0,stats_quality_corrupted_video_frames:0,stats_quality_corrupted_video_frames_current:0,stats_quality_creation_time:0,stats_quality_total_video_frames:0,stats_measure_count:0,stats_measure_samples:n};return{measure:function(e){var t={currentTime:0,playout:{start:0,end:0},buffer:{start:0,end:0,delay:{before:0,current:0,avg:0,min:0,max:0},update:{current:0,avg:0,min:0,max:0}},quality:{droppedVideoFrames:0,droppedVideoFramesCurrent:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0},bitrate:{current:0,avg:0,min:0,max:0},framerate:{current:0,avg:0,min:0,max:0}};e.data.stats&&"object"==typeof e.data.stats&&(t=e.data.stats);try{for(i+=1,r.push(t.buffer.delay.current),a.push(t.bitrate.current),o.push(t.framerate.current);r.length>n;)r.shift();for(;a.length>n;)a.shift();for(;o.length>n;)o.shift();if(i%n==0){var u=JSON.parse(JSON.stringify(r)).sort((function(e,t){return e-t}),0),d=JSON.parse(JSON.stringify(a)).sort((function(e,t){return e-t}),0),c=JSON.parse(JSON.stringify(o)).sort((function(e,t){return e-t}),0);return s.stats_buffer_average=Math.round(u.reduce((function(e,t){return e+t}),0)/u.length*1e3)/1e3,s.stats_buffer_min=Math.round(1e3*u[0])/1e3,s.stats_buffer_max=Math.round(1e3*u[u.length-1])/1e3,s.stats_bitrate_average=Math.round(d.reduce((function(e,t){return e+t}),0)/d.length/1e3),s.stats_bitrate_min=Math.round(d[0]/1e3),s.stats_bitrate_max=Math.round(d[u.length-1]/1e3),s.stats_frame_rate_average=Math.round(c.reduce((function(e,t){return e+t}),0)/c.length*1e3)/1e3,s.stats_frame_rate_min=c[0],s.stats_frame_rate_max=c[c.length-1],s.stats_measure_count+=1,s.stats_quality_dropped_video_frames=t.quality.droppedVideoFrames,s.stats_quality_dropped_video_frames_current=t.quality.droppedVideoFramesCurrent,s.stats_quality_corrupted_video_frames=t.quality.corruptedVideoFrames,s.stats_quality_corrupted_video_frames_current=t.quality.corruptedVideoFramesCurrent,s.stats_quality_creation_time=t.quality.creationTime,s.stats_quality_total_video_frames=t.quality.totalVideoFrames,s}return!1}catch(e){return!1}},reset:function(){for(i=0;r.length;)r.shift();for(;a.length;)a.shift();for(;o.length;)o.shift();for(var e in s)"stats_measure_samples"!==e&&(s[e]=0)}}}}}.apply(t,[]))||(e.exports=n)},4402:function(e,t,n){var i,r;i=[n(7080)],void 0===(r=function(e){return{create:function(){var t=e.create(),n={};return{measure:function(e){return{stream_info_has_audio:(n=e.data.streamInfo).haveAudio,stream_info_has_video:n.haveVideo,stream_info_width:n.videoInfo?n.videoInfo.width:0,stream_info_height:n.videoInfo?n.videoInfo.height:0,stream_info_frame_rate:n.videoInfo?n.videoInfo.frameRate:0,stream_info_sample_rate:n.audioInfo?n.audioInfo.sampleRate:0,stream_info_channels:n.audioInfo?n.audioInfo.channels:0,stream_info_bits_per_sample:n.audioInfo?n.audioInfo.bitsPerSample:0,connection_id:n.url.split("&cid=")[1].split("&pid=")[0]}},getFlat:function(){return t.get(n,"streamInfo",5)},reset:function(){n={}},getStreamname:function(){return void((e=n)&&Object.prototype.hasOwnProperty.call(e,"rtmp")&&Object.prototype.hasOwnProperty.call(e.rtmp,"streamname"))?n.rtmp.streamname:"";var e}}}}}.apply(t,i))||(e.exports=r)},6545:function(e,t){var n;void 0===(n=function(){return{create:function(){return{measure:function(e){return{warning_message:e.data.message}}}}}}.apply(t,[]))||(e.exports=n)},2215:function(e,t,n){var i,r;i=[n(1933),n(8478),n(8333),n(8197),n(9583),n(9914),n(5999),n(2556),n(7982),n(2788),n(4402),n(2381),n(2247),n(9555),n(3932),n(4245),n(4815),n(7666),n(1025),n(27),n(6545)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,p,E,h,m,g,_,b,T){function S(){var u,S,y,A,v,R,O,I,N,C,w,D,U,P=s.create().metrics,M={},L=n.create("NanoMetrics"),F=e,x=t,k={},B={},G={},H={},V=0,Y=0,W=0,j=0;function K(e){try{var t=function(e){var t=H&&H.source&&H.source.entries&&H.source.entries[V]&&H.source.entries[V].h5live?H.source.entries[V].h5live:{},n=t.server||{websocket:"",hls:"",progressive:""},i=t.rtmp&&t.rtmp.url?t.rtmp.url:"",r=function(e){var t=e.split(/\?(.+)/);return 1===t.length?t.push(""):t.pop(),t}(t.rtmp&&t.rtmp.streamname?t.rtmp.streamname:""),a=r[0],o=r[1],s=function(e,t,n){var i,r,a="";return e&&t&&(-1!==e.indexOf("bintu")||n&&n.websocket&&n.websocket.length&&-1!==n.websocket.indexOf("bintu")&&-1!==e.indexOf("localhost"))&&(r=/^[A-Za-z0-9 ]+$/,(i=t.split("-")[0]).length>4&&i.length<=6&&r.test(i))&&(a=t.split("-")[0]),a}(i,a,n),u=void 0!==B.hostname?B.hostname:"",d={application_name:"h5live-player",application_user_id:""+P.userId,application_event_id:""+P.eventId,application_account_id:""+P.accountId,application_account_key:""+P.accountKey,message:e.name.replace(/\b\w/g,(function(e){return e.toLowerCase()})).replace(/([A-Z])/g,"_$1").toUpperCase(),severity:"info",client_ip:"",timestamp_client:(new Date).toISOString(),referrer:document.location.href,os:F.os,os_version:F.osVersion,browser:F.browser,browser_version:F.browserVersion,player_id:S.id,player_type:S.type,player_version:S.version,player_event_name:e.name.replace(/\b\w/g,(function(e){return e.toLowerCase()})).replace(/([A-Z])/g,"_$1").toUpperCase(),server_domain:n.websocket&&n.websocket.length?n.websocket.split("//")[1].split("/")[0]:"",server_hostname:u,rtmp_url:i,rtmp_streamname:a,rtmp_streamparameter:o,connection_id:k&&k.url&&k.url.length?k.url.split("&cid=")[1].split("&pid=")[0]:"",time_played:G.currentTime?Math.round(1e3*G.currentTime)/1e3:0,time_elapsed:Y>0?Math.round(performance.now()-Y)/1e3:0,bintu_orga_hash:s};for(var c in M)Object.prototype.hasOwnProperty.call(M,c)&&(d[c]=""+M[c]);return d}(e);switch(e.name){case r.READY:z(C,"measure",e,t)&&q(t);break;case r.LOADING:O.reset(),R.reset(),q(t);break;case r.STREAM_INFO:case r.STREAM_INFO_UPDATE:k=e.data.streamInfo,z(y,"measure",e,t),q(t);break;case r.PLAY:Y=performance.now(),z(v,"measure",e,t),q(t),w.resetSwitchCount();break;case r.STATS:G=e.data.stats;var n=Object.prototype.hasOwnProperty.call(G,"adaptive");n&&D.setStats(e,t),z(R,"measure",e,t)&&(n&&Q(t,D.getStatsFlat()),q(t));break;case r.START_BUFFERING:v.setTimePlayingStateEnd(),O.start();break;case r.STOP_BUFFERING:O.end(),v.setTimePlayingStateStart(),z(O,"measure",e,t)&&(t.message=t.player_event_name="BUFFERING",q(t));break;case r.PAUSE:W=t.time_elapsed,j+=W,v.setTimePlayingStateEnd();var i=v.getTimePlayingStateTotal();z(I,"measure",e,t),z(O,"reset",e,t),Q(t,y.getFlat()),Q(t,{time_playing_state_total:i,time_elapsed_total_sum:j,entries_length:H&&Object.prototype.hasOwnProperty.call(H,"source")&&Object.prototype.hasOwnProperty.call(H.source,"entries")?H.source.entries.length:1}),Q(t,w.getSwitchCountFlat()),q(t),k={},G={},v.resetTimePlayingStateSubtotal(),w.resetSwitchCount(),j=0,Y=0;break;case r.ERROR:z(N,"measure",e,t),q(t);break;case r.DESTROY:q(t);break;case r.METADATA:case r.PLAYBACK_FINISHED:case r.MEDIA:case r.MUTE:case r.UNMUTE:case r.VOLUME_CHANGE:case r.STATE_CHANGE:break;case r.WARNING:z(U,"measure",e,t),q(t);break;case r.SWITCH_STREAM_INIT:z(w,"handleEvent",e,t)&&(Q(t,D.getStatsFlat()),q(t));break;case r.SWITCH_STREAM_SUCCESS:J(e,"entry")&&$(e.data.entry.index),W=t.time_elapsed,j+=W,Y=performance.now(),z(w,"handleEvent",e,t)&&(Q(t,y.getFlat()),Q(t,{time_elapsed_total:W,time_elapsed_total_sum:j}),q(t),y.reset());break;case r.SWITCH_STREAM_FAIL:case r.SWITCH_STREAM_ABORT:case r.UPDATE_SOURCE_INIT:z(w,"handleEvent",e,t)&&q(t);break;case r.UPDATE_SOURCE_SUCCESS:J(e,"source")&&((a=e.data.source)&&(H.source=a),$(e.data.source.startIndex)),W=t.time_elapsed,j+=W,Y=performance.now(),z(w,"handleEvent",e,t)&&(Q(t,y.getFlat()),Q(t,{time_elapsed_total:W,time_elapsed_total_sum:j}),q(t),y.reset());break;case r.UPDATE_SOURCE_FAIL:case r.UPDATE_SOURCE_ABORT:z(w,"handleEvent",e,t)&&q(t);break;case r.SERVER_INFO:B=e.data.serverInfo,z(A,"measure",e,t)&&(t.server_hostname=void 0!==B.hostname?B.hostname:"",q(t))}}catch(e){L.debug("metrics event error: "+(e.message?e.message:"exception"))}var a}function z(e,t,n,i){var r=e[t](n,i);if(r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a]);return!0}return!1}function q(e){L.debug("send "+e.player_event_name),u.send(e.player_event_name,e)}function X(){if("object"==typeof S&&"function"==typeof S.off)for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&S.off(r[e],K);u&&(u.destroy(),u=null),y=null,v=null,R=null,O=null,I=null,N=null,C=null,w=null,D=null,U=null}function Q(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}function $(e){V=isNaN(e)?0:e}function J(e,t){var n=e&&Object.prototype.hasOwnProperty.call(e,"data");return t?n&&Object.prototype.hasOwnProperty.call(e.data,t):n}return{setup:function(e,t){var n;console.debug("NanoMetrics api version "+this.version),X(),L.debug("setup"),S=t,!(H=i.copy(e)).source.h5live||H.source.entries&&H.source.entries.length||(H.source.entries=[{h5live:i.copy(H.source.h5live)}],delete H.source.h5live);var s=H.metrics;if(!s)throw new x(o.METRICS_NO_OBJECT,a.SETUP.METRICS_NO_OBJECT);if("object"!=typeof s)throw new x(o.METRICS_NOT_OBJECT,a.SETUP.METRICS_NOT_OBJECT);if(!Object.getOwnPropertyNames(s).length)throw new x(o.METRICS_EMPTY_OBJECT,a.SETUP.METRICS_EMPTY_OBJECT);for(n in s)if(!Object.prototype.hasOwnProperty.call(s,n)||!Object.prototype.hasOwnProperty.call(P,n)||(P[n]=s[n],0===n.indexOf("customField"))){var F,k=n.split("customField");if(!(k.length>1&&0===k[0].length))throw new x(o.METRICS_PROPERTY_INVALID.replace("$key$",n),a.SETUP.METRICS_PROPERTY_INVALID);if(F=parseInt(k[1],10),isNaN(F))throw new x(o.METRICS_INDEX_INVALID.replace("$key$",n),a.SETUP.METRICS_INDEX_INVALID);if(F.toString()!==k[1])throw new x(o.METRICS_INDEX_INCORRECT.replace("$key$",n),a.SETUP.METRICS_INDEX_INCORRECT);if(F<1||F>10)throw new x(o.METRICS_INDEX_RANGE.replace("$key$",n),a.SETUP.METRICS_INDEX_RANGE);M["application_custom_field_"+k[1]]=s[n]}if(!P.accountId||!P.accountKey)throw new x(o.METRICS_NO_CREDENTIALS,a.SETUP.METRICS_NO_CREDENTIALS);for(n in s)L.debug("metrics config["+n+"]: "+JSON.stringify(s[n]));for(var B in y=c.create(),A=l.create(),v=f.create(),R=p.create(P.statsInterval),O=E.create(),I=h.create(),N=m.create(),C=g.create(),w=_.create(),D=b.create(),U=T.create(),u=d.create({accountId:P.accountId,accountKey:P.accountKey}),r)Object.prototype.hasOwnProperty.call(r,B)&&S.on(r[B],K);H.source&&!isNaN(H.source.startIndex)&&(V=H.source.startIndex)},destroy:X}}return S.emptyConfig=s,S.validConfig=u,S}.apply(t,i))||(e.exports=r)},2788:function(e,t,n){var i,r;i=[n(8333)],void 0===(r=function(e){return{create:function(t){var n={accountId:void 0,accountKey:void 0};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t&&Object.prototype.hasOwnProperty.call(t,i)&&void 0!==t[i]&&(n[i]=t[i]);var r=0,a={},o="https://glog1.nanocosmos.de/gelf/"+n.accountKey,s=e.create("MetricsLogger"),u=!0;function d(e,t,n){void 0!==a[e]&&(s.debug("#"+e+" "+t+" "+n+" "+a[e].status),delete a[e])}return window.addEventListener("unload",(function(){u=!1})),{send:function(e,t){try{r+=1;var n=new XMLHttpRequest;a[r]=n;var i=a[r];if(i.open("POST",o,u),i.onreadystatechange=function(e,t){if(this&&4===this.readyState){var n=this.status>=400?"fail":this.status>=200?"success":"unknown";d.call(null,e,t,n)}}.bind(i,r,e),["abort","error","timeout"].forEach((function(t){i.addEventListener(t,d.bind(null,r,e,t))})),void 0!==t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t=null}if("object"==typeof t)try{t=JSON.stringify(t),s.debug("#"+r+" "+e+" send "+t),setTimeout(d.bind(null,r,e,"suspend"),5e3),i.send(t)}catch(e){d.call(null,r,"catch "+e.message)}}else i.send()}catch(e){d.call(null,r,"catch "+e.message)}},destroy:function(){for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&delete a[e]}}}}}.apply(t,i))||(e.exports=r)},7080:function(e,t){var n;void 0===(n=function(){return{create:function(){var e,t,n={},i={source:"src",options:"opt",config:"cfg",playback:"pb",entries:"entr"};function r(t,i){var a;for(var s in t)a=o(s,i),e&&Array.isArray(t[s])?r(t[s].slice(Math.max(t[s].length-e,0)),a):"object"==typeof t[s]?r(t[s],a):n[a]=t[s];return n}function a(e){return isNaN(e)&&e===e.toUpperCase()}function o(e,n){var r,o=n+"_";t&&Object.prototype.hasOwnProperty.call(i,e)&&(e=i[e]);for(var s=0;s<e.length;s++)a(r=e.charAt(s))&&(o+="_"),o+=r.toLowerCase();return o}function s(){n={}}return{get:function(n,i,a,o){return s(),n&&"object"==typeof n?(i=i?i.toLowerCase():"",e=a,t=o,r(n,i)):{}},reset:s}}}}.apply(t,[]))||(e.exports=n)},8209:function(e,t,n){var i,r;i=[n(1969),n(8544),n(6965),n(5810),n(9583),n(492),n(5493),n(2682),n(3778),n(6028),n(6725),n(2874)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l){"use strict";function f(t){c.validatePlayerDivId(t),this.version=s.CORE,console.debug("NanoCore api version: "+this.version),this.type="default",this.id=Math.round(1e11*Math.random()).toString(),this._playerDivId=t,this._dummyPlayer=new e(this._playerDivId),this._realPlayer=this._dummyPlayer}var p=f.prototype=Object.create(e.prototype);return p.setup=function(e){return new l(function(n,i){var o=e&&e.events&&e.events.onError?e.events.onError:null,s=function(e){e.code||(e.code=u.SETUP.EXCEPTION),e.message||(e.message="An unknown error occured during setup.");var t={name:"Error",data:{code:e.code,message:e.message},player:this._playerDivId,id:this.id,version:this.version,state:a.IDLE};o&&this.on(t.name,o),this.emit(t.name,t),i(e)}.bind(this);try{this._realPlayer&&this._realPlayer!==this._dummyPlayer&&(this._realPlayer.destroy(),this._realPlayer=this._dummyPlayer),t.create(this._playerDivId,e).then(function(t){this.version=t.version,this.type=t.type,this._realPlayer=t,this._realPlayer.id=this.id,this._propagator=d.create(t,r,this),this._realPlayer.setup(e).then(function(e){window.onunload=function(){this._realPlayer.destroy()}.bind(this),function(e){n(e)}(e)}.bind(this),s)}.bind(this),(function(e){s(e)}))}catch(e){s(e)}}.bind(this))},p.destroy=function(){this._realPlayer.destroy()},p.play=function(){this._realPlayer.play()},p.pause=function(){this._realPlayer.pause()},p.mute=function(){this._realPlayer.mute()},p.unmute=function(){this._realPlayer.unmute()},p.setVolume=function(e){this._realPlayer.setVolume(e)},p.updateSource=function(e,t){return this._realPlayer.updateSource(e,t)},p.switchStream=function(e){return this._realPlayer.switchStream(e)},p.setAdaption=function(e){this._realPlayer.setAdaption(e)},f.events=r,f.states=a,f.emptyConfig=n,f.validConfig=i,f.pauseReasons=o,f.errorCodes=u,f.version=s.CORE,f.capabilities=t.capabilities,f}.apply(t,i))||(e.exports=r)},9921:function(e,t,n){var i,r;i=[n(130),n(8209),n(1583),n(2215),n(4216),n(6028),n(1473),n(6725),n(9658),n(8197)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d){"use strict";var c,l=t.events,f=t.states,p=t.emptyConfig,E=t.validConfig,h=t.pauseReasons,m=t.errorCodes,g=t.capabilities,_=n.events,b=n.publicEvents,T=n.emptyConfig,S=n.validConfig,y=r.emptyConfig,A=r.validConfig,v={};for(c in l)v[c]=l[c];for(c in b)v[c]=b[c];function R(t){s.validatePlayerDivId(t),this.version=e.NANOPLAYER,console.debug("NanoPlayer api version: "+this.version),this.coreversion="",this.viewversion="",this.type="default",this.id=Math.round(1e11*Math.random()).toString(),this._playerDivId=t,this._core=null,this._view=null,this._metrics=null}var O=R.prototype=Object.create(u.prototype);return O.setup=function(e){var n=d.copy(e);return new Promise(function(e,s){try{var u=c&&c.events&&c.events.onError?c.events.onError:null,d=function(e){e.code||(e.code=m.SETUP.EXCEPTION),e.message||(e.message="An unknown error occured during setup.");var t={name:"Error",data:{code:e.code,message:e.message},player:this._playerDivId,id:this.id,version:this.version,state:f.IDLE};u&&this.on(t.name,u),this.emit(t.name,t),c.style.view&&(this._initView(c),null!==this._view&&this._view.handleView(R.states.UNINITIALIZED)),s(e)}.bind(this),c={};o.extend(n,c),this._bintuConfig=y.create(),this._coreConfig=p.create(),this._viewConfig=T.create(),o.merge(c,this._bintuConfig),o.merge(c,this._viewConfig),o.merge(c,this._coreConfig),o.extend(this._viewConfig,c),o.extend(this._coreConfig,c),o.clean(c),this.destroy();var l={};o.extend(n,l),this._checkConfig(l),r.setup(c).then(function(n){try{(c=n).metrics&&(this._metrics=new i,this._metrics.version=this.version,this._metrics.setup(n,this)),o.merge(c,this._viewConfig),o.merge(c,this._coreConfig),o.extend(this._viewConfig,c),o.extend(this._coreConfig,c),o.clean(c),this._initView(c),this._core=new t(this._playerDivId),this._core.id=this.id,this._corePropagator=a.create(this._core,R.coreEvents,this),this._setPublicListeners(this._coreConfig.events,this),this._connectLayers(),this._core.setup(this._coreConfig).then(function(t){window.removeEventListener("unload",this.destroy.bind(this)),window.addEventListener("unload",this.destroy.bind(this)),this.coreversion=this._core.version,this.type=this._core.type,this._view&&this._view.postSetup(),o.extend(this._bintuConfig,t),o.extend(this._viewConfig,t),o.clean(t),e(t)}.bind(this),function(e){this._view&&this._viewConfig.style&&this._viewConfig.style.view&&this._view.handleView(R.states.UNINITIALIZED),s(e)}.bind(this))}catch(e){d(e)}}.bind(this),d)}catch(e){d(e)}}.bind(this))},O.destroy=function(){this._view&&this._view.destroy(),this._view=null,this._core&&this._core.destroy(),this._core=null,this._metrics&&this._metrics.destroy(),this._metrics=null},O._checkConfig=function(e){var t=[];if(e.source&&e.source.bintu){var n=o.check({source:{bintu:e.source.bintu}},A.create());t=t.concat(n)}if(e.style){var i=o.check({style:e.style},S.create());t=t.concat(i)}if(e.source){delete e.source.bintu,delete e.style,delete e.metrics;var r=o.check(e,E.create()).filter((function(e){return-1!==e.indexOf("valid")}));t=t.concat(r)}if(t.length){var a=e&&e.events&&e.events.onWarning?e.events.onWarning:null;a&&this.on(l.WARNING,a),t.forEach(function(e){var t={name:l.WARNING,data:{message:e},player:this._playerDivId,id:this.id,version:this.version,state:f.IDLE};this.emit(t.name,t)}.bind(this))}},O._initView=function(e){this._view||(this._view=new n,this._view.version=this.version,this.viewversion=this._view.version,this._view.setBaseValues(this._playerDivId),this._view.baseSetup(e),this._viewPropagator=a.create(this._view,R.viewPublicEvents,this),this._setPublicListeners(this._viewConfig.events,this))},O._setPublicListeners=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&"function"==typeof e[n]){var i=n.replace("on",""),r=e[n];t.on(i,r),delete e[n]}},O._connectLayers=function(){var e=[R.coreEvents.MEDIA];function t(e,t,n,i){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(e[r])&&n.on(e[r],i.bind(this))}t(R.coreEvents,e,this,this._onCoreEvent.bind(this)),this._view&&t(R.viewEvents,[],this._view,this._onViewEvent.bind(this))},O._onCoreEvent=function(e){if(this._view&&this._viewConfig.style&&this._viewConfig.style.view){if(e.name===R.coreEvents.STATS)return void this._view.handleStats(e.data.stats);e.name===R.coreEvents.STATE_CHANGE?this._view.update(e):e.name===R.coreEvents.STREAM_INFO?this._view.handleStreamInfo(e):e.name===R.coreEvents.STREAM_INFO_UPDATE?this._view.handleStreamInfoUpdate(e):e.name===R.coreEvents.MUTE||e.name===R.coreEvents.UNMUTE?this._view.handleMute(e.name===R.coreEvents.MUTE):e.name===R.coreEvents.VOLUME_CHANGE?this._view.handleVolume(e.data.volume):e.name===R.coreEvents.READY?this._view.handleConfig(e.data.config):e.name===R.coreEvents.METADATA?this._view.handleMetaData(e):e.name===R.coreEvents.UPDATE_SOURCE_SUCCESS?this._view.handleUpdateSourceSuccess(e):e.name===R.coreEvents.SWITCH_STREAM_SUCCESS&&this._view.handleSwitchStreamSuccess(e)}},O._onViewEvent=function(e){this._core&&(e.name===R.viewEvents.PLAY?this._core.play():e.name===R.viewEvents.PAUSE?this._core.pause():e.name===R.viewEvents.MUTE?this._core.mute():e.name===R.viewEvents.UNMUTE?this._core.unmute():e.name===R.viewEvents.VOLUME_CHANGE?this._core.setVolume(e.data.volume):e.name===R.viewEvents.FULLSCREEN_CHANGE&&this.emit(R.viewPublicEvents.FULLSCREEN_CHANGE,e.data))},O._callMethod=function(){if(!this._core)throw new Error('"'+arguments[0]+'" must be implemented or player not initialized by call setup.');return this._core[arguments[0]].apply(this._core,Array.prototype.slice.call(arguments,1))},O._callViewMethod=function(){if(!this._view)throw new Error('"'+arguments[0]+'" must be implemented or player not initialized by call setup.');return this._view[arguments[0]].apply(this._view,Array.prototype.slice.call(arguments,1))},O.play=function(){this._callMethod("play")},O.pause=function(){this._callMethod("pause")},O.mute=function(){this._callMethod("mute")},O.unmute=function(){this._callMethod("unmute")},O.setVolume=function(e){this._callMethod("setVolume",e)},O.updateSource=function(e,t){return new Promise(function(n,i){r.updateSource(e,t).then(function(e){this._callMethod("updateSource",e.source,t).then((function(e){n(e)}),(function(e){i(e)}))}.bind(this),function(e){var t={name:"Error",data:{code:e.code,message:e.message},player:this._playerDivId,id:this.id,version:this.version,state:f.IDLE};this.emit(t.name,t),i(e)}.bind(this))}.bind(this))},O.switchStream=function(e){return new Promise(function(t,n){this._callMethod("switchStream",e).then((function(e){t(e)}),(function(e){n(e)}))}.bind(this))},O.setAdaption=function(e){this._callMethod("setAdaption",e)},O.requestFullscreen=function(){return this._callViewMethod("requestFullscreen")},O.exitFullscreen=function(){return this._callViewMethod("exitFullscreen")},R.states=f,R.coreEvents=l,R.viewEvents=_,R.viewPublicEvents=b,R.events=v,R.pauseReasons=h,R.capabilities=g,window.NanoPlayer=R,R}.apply(t,i))||(e.exports=r)},6722:function(e,t,n){var i,r;i=[n(1969),n(3284),n(1313),n(166),n(3778),n(3890),n(2682),n(8053),n(9658),n(9088),n(1473),n(8478),n(8197),n(6965),n(5810),n(9583),n(8656),n(492),n(5493)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,p,E,h,m,g,_){var b=d.log,T=2e4,S=2e4;function y(e){this.version=o.CORE,this.type="flash",this.config=p.create(),this._volume=1,this._muted=!1,this._mediaElement=null,this._mediaSource=null,this._playing=!1,this._playerDivId=e,this._playerDiv=document.getElementById(this._playerDivId),this._mediaElementId="flash-"+e,this.state=this.STATE.IDLE,this._triggered=0,this._stats={currentTime:0,playout:{start:0,end:0},buffer:{start:0,end:0,delay:{before:0,current:0,avg:0,min:0,max:0,deviation:0},update:{current:0,avg:0,min:0,max:0,deviation:0}},quality:{droppedVideoFrames:0,droppedVideoFramesCurrent:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0},bitrate:{current:0,avg:0,min:0,max:0,deviation:0},framerate:{current:0,avg:0,min:0,max:0,deviation:0}},this._intervalEmitStats=0,this._streamInfo=null,this._isSwitchStream=!1,this._isUpdateSource=!1,this._switchCount=0}y.isSupported=function(){return 0!==s.ua.pv[0]||s.ua.pv===[0,0,0]},y.supportedTechniques=[t.FLASH];var A=y.prototype=Object.create(e.prototype);return A.setup=function(e){return new Promise(function(t,i){try{var a=c.check(e,E.create());c.merge(e,this.config),c.clean(this.config),!this.config.source.h5live||this.config.source.entries&&this.config.source.entries.length||(this.config.source.entries=[{h5live:f.copy(this.config.source.h5live)}]);var o=this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live.rtmp,s=this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live.params;if(!(o&&o.url&&o.streamname||s&&s.url&&s.stream))throw new l(n.CONFIG_RTMP,r.SETUP.CONFIG_RTMP);this._emitter=new u,this._setListeners(this.config.events,this),a.forEach(function(e){this._emitWarning(e)}.bind(this)),this._metaDataEnabled=this.config.playback.metadata,this._setupVideoElement(),this._setupFinish().then(t,i)}catch(e){i(e)}}.bind(this))},A.play=function(){this._setMediaElement(),this._mediaElement.Start()},A.pause=function(){this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource}),this._isUpdateSource=!1),this._triggered=arguments.length?arguments[0]:0,clearTimeout(this._bufferTimeout),this._setMediaElement(),this._mediaElement.Stop()},A.mute=function(){this._setMediaElement(),this._muted=!0,this._mediaElement.SetVolume(0),this._emit(h.MUTE)},A.unmute=function(){this._setMediaElement(),this._muted=!1,this._mediaElement.SetVolume(this._volume),this._emit(h.UNMUTE)},A.setVolume=function(e){e<0&&(e=0),e>1&&(e=1),this._setMediaElement(),this._volume=e,this._muted||this._mediaElement.SetVolume(this._volume),this._emit(h.VOLUME_CHANGE,{volume:e})},A.destroy=function(){this._setState(this.STATE.DESTROYING),this._playing&&this.pause(this.state),this._emit(h.DESTROY),this._mediaElement&&(this.pause(),document.getElementById(this._playerDivId).removeChild(this._mediaElement),this._mediaElement=null),clearTimeout(this._bufferTimeout),this.removeAllListeners()},A.updateSource=function(e){return new Promise(function(t,n){try{this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream,reason:"superseded"}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource,reason:"superseded"}),this._isUpdateSource=!1),this._isUpdateSource=Math.round(1e11*Math.random()),this._switchCount++,setTimeout(this._emit.bind(this,h.UPDATE_SOURCE_INIT,{source:this.config.source,entry:this._getEntry(),rule:"none",options:this.config.source.options?this.config.source.options:{},tag:"",count:this._switchCount,type:"direct",id:this._isUpdateSource}),0);var i=!1;this.state!==this.STATE.PLAYING&&this.state!==this.STATE.LOADING&&this.state!==this.STATE.BUFFERING||(i=!0),this.config.source=e,!this.config.source.h5live||this.config.source.entries&&this.config.source.entries.length||(this.config.source.entries=[{h5live:f.copy(this.config.source.h5live)}]),this._setConnectionConfig(this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live),this.config.source.entries.length>1&&this.config.source.options&&this.config.source.options.adaption&&this.config.source.options.adaption.rule&&"none"!==this.config.source.options.adaption.rule&&this._emitWarning("ABR is not supported with flash!"),i?this.play():(setTimeout(this._emit.bind(this,h.UPDATE_SOURCE_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isUpdateSource}),0),this._isUpdateSource=!1),t(f.copy(this.config))}catch(e){n(e)}}.bind(this))},A.switchStream=function(e){return new Promise(function(t,n){if(isNaN(e)||e<0||e>=this.config.source.entries.length)n(new l(a.PLAYER.INVALID_ENTRY_INDEX,r.PLAYER.INVALID_ENTRY_INDEX));else{this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream,reason:"superseded"}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource,reason:"superseded"}),this._isUpdateSource=!1),this._isSwitchStream=Math.round(1e11*Math.random()),this._switchCount++,setTimeout(this._emit.bind(this,h.SWITCH_STREAM_INIT,{source:this.config.source,entry:this._getEntry(),rule:"none",options:this.config.source.options?this.config.source.options:{},tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),0);var i=!1;this.state!==this.STATE.PLAYING&&this.state!==this.STATE.LOADING&&this.state!==this.STATE.BUFFERING||(i=!0),this._setConnectionConfig(this.config.source.entries[e].h5live),i?this.play():(setTimeout(this._emit.bind(this,h.SWITCH_STREAM_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),0),this._isSwitchStream=!1),t(f.copy(this.config))}}.bind(this))},A.setAdaption=function(e){e&&e.rule&&"none"!==e.rule&&this._emitWarning("ABR is not supported with flash!")},A._setupVideoElement=function(){var e="nano.player.swf";void 0!==this.config.playback.flashplayer&&(e=this.config.playback.flashplayer);var t=document.createElement("div");t.setAttribute("id","flashReplace"),this._playerDiv.appendChild(t);var n={};n.id=this._mediaElementId,n.name=this._mediaElementId,n.align="middle",n.wmode="transparent",s.embedSWF(e,"flashReplace","100%","100%","9.0.0",null,{},{quality:"high",bgcolor:"#000000",allowscriptaccess:"always",allowfullscreen:"true",allowfullscreeninteractive:"true",wmode:"transparent"},n)},A._setupFinish=function(){return new Promise(function(e,t){var n=0,a=0;n=setInterval(function(){if(a++,n&&(this._mediaElement=document.getElementById(this._mediaElementId),this._mediaElement&&this._mediaElement.Start)){clearInterval(n);try{if(window._flashPlayers[this._mediaElementId]=this,this._setName(),this._mediaElement.TraceExternalFunctions(),this._setNetStream(!1),this._setConnectionConfig(this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live),this.config.source.entries.length>1&&this.config.source.options&&this.config.source.options.adaption&&this.config.source.options.adaption.rule&&"none"!==this.config.source.options.adaption.rule&&this._emitWarning("ABR is not supported with flash!"),this._setPlayerConfig(this._playerDiv.offsetWidth,this._playerDiv.offsetHeight),this.config.playback.muted&&this.mute(),this.config.playback.timeouts){var o=1e3*this.config.playback.timeouts.loading,s=1e3*this.config.playback.timeouts.buffering;T=Math.max(Math.min(o,6e4),1e4),S=Math.max(Math.min(s,6e4),1e4)}this.config.type=this.type,this._setState(this.STATE.READY),this._emit(h.READY,{config:this.config}),this.config.playback.autoplay&&this.play(),e(f.copy(this.config))}catch(e){t(e)}}a>100&&(clearInterval(n),t(new l(i.EMBED_PLAYER,r.SETUP.EMBED_PLAYER)))}.bind(this),100)}.bind(this))},A._setListeners=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&"function"==typeof e[n]){var i=n.replace("on",""),r=e[n];t.on(i,r)}},A._setState=function(e){this.state=e,b("nanoplayer ("+this._playerDivId+'): set state "'+this._getState()+'"',3),this._emit(h.STATE_CHANGE)},A._getState=function(){for(var e in this.STATE)if(this.STATE[e]===this.state)return e},A._emit=function(e,t){var n={};t&&t.name&&t.data?n=t:t?(n.data=t,n.name=e||"unknown"):(n.data={},n.name=e||"unknown"),n.player=this._playerDivId,n.id=this.id,n.version=this.version,n.state=this.state,"Error"===e&&n.data.code&&n.data.message&&b("nanoplayer ("+this._playerDivId+"): error "+n.data.code+" "+n.data.message,1),this.emit(n.name,n)},A._emitError=function(e,t){this._emit(h.ERROR,{code:e,message:t})},A._emitWarning=function(e){this._emit(h.WARNING,{message:e})},A._setConnectionConfig=function(e){this._setMediaElement();var t=e.rtmp,n=e.params,i=n&&n.url?n.url:t&&t.url?t.url:null,r=n&&n.stream?n.stream:t&&t.streamname?t.streamname:null;i&&r?(this.config.url=i+"/"+r,this._mediaElement.SetServerUrl(i),this._mediaElement.SetStreamName(r)):this.config.url=""},A._setPlayerConfig=function(e,t){this._setMediaElement(),this._mediaElement.SetVideoDisplayResolution(e+","+t),this._mediaElement.SetResize("false"),this._mediaElement.SetOnlyThisResolution(e+","+t)},A._setNetStream=function(e){this._setMediaElement(),this._mediaElement.UseNetstream(e?1:0)},A._setMediaElement=function(){var e=document.getElementById(this._mediaElementId);this._mediaElement=e},A._getPauseReason=function(e){var t="";if(e)switch(this.state){case this.STATE.READY:t=_.SERVER_NOT_FOUND;break;case this.STATE.LOADING:t=_.STREAM_NOT_FOUND;break;case this.STATE.BUFFERING:t=_.BUFFER;break;case this.STATE.UNKNOWN:t=_.UNKNOWN;break;case this.STATE.PLAYING:t=_.NORMAL;break;case this.STATE.DESTROYING:t=_.DESTROY;break;case this.STATE.PLAYBACK_RESTARTING:t=_.PLAYBACK_RESTART;break;default:t=_.NORMAL}else t=_.NORMAL;return t},A._startIntervals=function(){this._stopIntervals(),this._onStats(!0),this._intervalEmitStats=setInterval(this._onStats.bind(this),100)},A._stopIntervals=function(){this._intervalEmitStats&&(clearInterval(this._intervalEmitStats),this._intervalEmitStats=0)},A._getEntry=function(){var e={},t=this._mediaElement.GetStreamName();return this.config.source.entries.forEach((function(n){n.h5live.rtmp.streamname===t&&(e=f.copy(n))})),e},A._onStreamInfo=function(e){b("nanoplayer ("+this._playerDivId+"): onStreamInfo",2),this._setMediaElement(),this._streamInfo=e,this._streamInfo.url="",this._streamInfo.rtmp={url:this._mediaElement.GetServerUrl(),streamname:this._mediaElement.GetStreamName()},this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource}),this._isUpdateSource=!1),this._emit(h.STREAM_INFO,{streamInfo:this._streamInfo})},A._onStats=function(e){var t=e?0:this._stats.currentTime+.1;this._stats.currentTime=t;var n="stats error";try{n=JSON.stringify(this._stats)}catch(e){}b("nanoplayer ("+this._playerDivId+"): stats - "+n,4),this._emit(h.STATS,{stats:this._stats})},A._onLoading=function(){this._isSwitchStream||this._isUpdateSource||(this._playing=!0,this._setState(this.STATE.LOADING),this._emit(h.LOADING)),this._loadingTimeout=setTimeout(function(){this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_FAIL,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream,code:r.STREAM.NOT_FOUND,message:"The requested stream can not be found."}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_FAIL,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource,code:r.STREAM.NOT_FOUND,message:"The requested stream can not be found."}),this._isUpdateSource=!1),this._emitError(r.STREAM.NOT_FOUND,"The requested stream can not be found."),this.pause(this.state)}.bind(this),T)},A._onPlaying=function(){clearTimeout(this._loadingTimeout),clearTimeout(this._bufferTimeout),this.state===this.STATE.LOADING&&(this._startPlayingTimeout&&clearTimeout(this._startPlayingTimeout),this._startPlayingTimeout=setTimeout(function(){clearTimeout(this._startPlayingTimeout),this._startPlayingTimeout=0,this._setState(this.STATE.PLAYING),this._playing=!0,this.setVolume(this._volume),!this._intervalEmitStats&&this._emit(h.PLAY,{stats:{connecting:0,connected:0,firstFragmentReceived:0,firstFrameRendered:0,playable:0,playing:0}}),!this._intervalEmitStats&&this._startIntervals()}.bind(this),1e3))},A._onStartBuffering=function(){this.state<this.STATE.PLAYING||this._isSwitchStream||this._isUpdateSource||(this._setState(this.STATE.BUFFERING),this._startBufferTimeout&&clearTimeout(this._startBufferTimeout),this._startBufferTimeout=setTimeout(function(){clearTimeout(this._startBufferTimeout),this._startBufferTimeout=0,this.state===this.STATE.BUFFERING&&(this._playing=!1,this._emit(h.START_BUFFERING),this._bufferTimeout=setTimeout(function(){this._emitError(r.STREAM.MEDIA_NOT_AVAILABLE,"No media available"),this.pause(this.state)}.bind(this),S))}.bind(this),2e3))},A._onStopBuffering=function(){clearTimeout(this._loadingTimeout),clearTimeout(this._bufferTimeout),this._playing=!0,this._setState(this.STATE.PLAYING),this._emit(h.STOP_BUFFERING)},A._onPause=function(){if(!this._isSwitchStream&&!this._isUpdateSource){clearTimeout(this._loadingTimeout),clearTimeout(this._bufferTimeout),this._playing=!1;var e=this._getPauseReason(this._triggered);b("nanoplayer ("+this._playerDivId+'): trigger pause with reason "'+e+'", state "'+this._getState()+'"',3),this._setState(this.STATE.PAUSED),this._stopIntervals(),this._emit(h.PAUSE,{reason:e})}},A._emitMetaData=function(e,t){if(this._metaDataEnabled){b("nanoplayer ("+this._playerDivId+"): onMetaData",2);try{var n=JSON.stringify(t);b("nanoplayer ("+this._playerDivId+"): handlerName="+e+", metaData="+n,2)}catch(e){}var i={handlerName:e,streamTime:0,message:t};this._emit(h.METADATA,i)}},A._onMetaData=function(e){if(Array.isArray(e)){for(var t={},n=0;n<e.length;n+=1)t[e[n].name]=e[n].value;e=t}var i={haveAudio:!!e.audiocodecid,haveVideo:!!e.videocodecid,audioInfo:null,videoInfo:null};i.haveAudio&&(i.audioInfo={sampleRate:e.audiosamplerate,channels:e.stereo?2:1,bitsPerSample:e.audiosamplesize}),i.haveVideo&&(i.videoInfo={width:e.width,height:e.height,frameRate:e.framerate}),this._onStreamInfo(i),this._emitMetaData("MetaData",e)},A._onCuePoint=function(e){this._emitMetaData("CuePoint",e)},A._onVolumeChange=function(){},A._onResize=function(){if(this._streamInfo&&this._streamInfo.haveVideo){this._setMediaElement();var e=this._streamInfo.videoInfo.width,t=this._streamInfo.videoInfo.height,n=this._mediaElement.GetCurrentSizeOfContainer(),i=n[0]/n[1],r=e/t;i<r?(e=n[0],t=Math.round(e/r)):(t=n[1],e=Math.round(t*r)),this._mediaElement.SetResize("true"),this._mediaElement.SetVideoDisplayResolution(e+","+t),this._mediaElement.SetResize("false"),this._mediaElement.SetOnlyThisResolution(e+","+t),this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(function(){this._resizeTimeout=0,this._mediaElement.SetResize("true"),this._mediaElement.SetVideoDisplayResolution(e+","+t),this._mediaElement.SetResize("false"),this._mediaElement.SetOnlyThisResolution(e+","+t)}.bind(this),300)}},A._onDebug=function(e){var t="string"==typeof e?e:e.message?e.message:e.data.message?e.data.message:"unknown";b("nanoplayer ("+this._playerDivId+"): "+t,2)},A._onFlashReady=function(){this._onDebug("flash ready")},A._onFlashState=function(e,t){if(void 0!==e){var n="";if("string"==typeof e||e instanceof String)n=e,this._onDebug("onFlashCallState: "+n+" from "+t);else for(var i in this._onDebug("onFlashCallState: "+t),e)Object.prototype.hasOwnProperty.call(e,i)&&(this._onDebug("onFlashCallState: "+i+" = "+e[i]),"state"!==i&&"code"!==i||(n=e[i]));n===this.FLASH_STATE.VIDEO_DISPLAY.LOADING||n===this.FLASH_STATE.NET_STREAM.PLAY.RESET||n===this.FLASH_STATE.NET_STREAM.PLAY.UNPUBLISH_NOTIFY||n===this.FLASH_STATE.NET_STREAM.PLAY.PUBLISH_NOTIFY?this._onLoading():n===this.FLASH_STATE.VIDEO_DISPLAY.REWINDING||n===this.FLASH_STATE.VIDEO_DISPLAY.PLAYING||n===this.FLASH_STATE.NET_STREAM.PLAY.START?(this.state===this.STATE.LOADING&&this._onPlaying(),this.state===this.STATE.BUFFERING&&this._onStopBuffering()):n===this.FLASH_STATE.VIDEO_DISPLAY.BUFFERING?this._onStartBuffering():n!==this.FLASH_STATE.VIDEO_DISPLAY.CONNECTION_ERROR&&n!==this.FLASH_STATE.VIDEO_DISPLAY.STOPPED&&n!==this.FLASH_STATE.VIDEO_DISPLAY.DISCONNECTED&&n!==this.FLASH_STATE.NET_STREAM.PLAY.STOP&&n!==this.FLASH_STATE.NET_STREAM.PLAY.STREAM_NOT_FOUND||this._onPause(),"error"===e.level?this._onDebug("onFlashCallState: ERROR - "+n):this._onDebug("onFlashCallState: state="+n)}},A._setName=function(){this._setMediaElement(),this._mediaElement.SetName(this._mediaElementId)},A.STATE=g,A.FLASH_STATE=m,A.PAUSE_REASON=_,window._flashPlayers={},window.onFlashCallExternalApplicationReady=function(){return!0},window.onFlashCallInternalApplicationReady=function(e){window._flashPlayers[e]&&window._flashPlayers[e]._onFlashReady()},window.onFlashCallMyTrace=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onDebug(t)},window.onFlashCallAutoResizeContainer=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onResize(t)},window.onFlashCallVolumeChange=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onVolumeChange(t)},window.onFlashCallMetaDataReceived=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onMetaData(t)},window.onFlashCallCuePointReceived=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onCuePoint(t)},window.onFlashCallState=function(e,t,n){window._flashPlayers[e]&&window._flashPlayers[e]._onFlashState(t,n)},y}.apply(t,i))||(e.exports=r)},651:function(e,t,n){var i,r;i=[n(6637),n(3778),n(3890),n(9583),n(492),n(9673),n(594),n(680),n(1376),n(8333)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d){return{create:function(i){var a,c,l,f,p,E=d.create("ErrorSelector"),h=[{type:s.STATE_CHANGE,listener:function(e){(a=e.data.state)===r.LOADING&&(l=!1,c=null)}},{type:s.LOADING_TIMEOUT,listener:function(){m("STREAM",l?"NOT_ENOUGH_DATA":c&&"stopped"===c?"SOURCE_STOPPED":"NOT_FOUND")}},{type:s.BUFFERING_TIMEOUT,listener:function(){m("STREAM",c&&"stopped"===c?"SOURCE_STOPPED":"MEDIA_NOT_AVAILABLE")}},{type:s.STREAM_INFO,listener:function(){l=!0}},{type:s.DOCUMENT_VISIBLE,listener:g},{type:s.DOCUMENT_HIDDEN,listener:g},{type:o.MEDIA_ERROR,listener:function(e){switch(e.data.code){case t.MEDIA.ABORTED:m("MEDIA","ABORTED");break;case t.MEDIA.DOWNLOAD_ERROR:m("MEDIA","DOWNLOAD_ERROR");break;case t.MEDIA.DECODE_ERROR:m("MEDIA","DECODE_ERROR");break;case t.MEDIA.NOT_SUPPORTED:m("MEDIA","NOT_SUPPORTED");break;case t.MEDIA.MEDIA_SOURCE_ENDED:(f||p)&&a===r.LOADING?m("PLAYER","VISIBILITY_HIDDEN"):m("MEDIA","MEDIA_SOURCE_ENDED");break;case t.PLAYER.PLAYBACK_ERROR:m("PLAYER","PLAYBACK_ERROR")}}},{type:u.STREAM_STATUS,listener:function(e){c=e.data.onStreamStatus.status}}];function m(e,r){var a,o;a=s.ERROR,o={code:t[e][r],message:n[e][r]},i.emit(a,o)}function g(e){e.name===s.DOCUMENT_HIDDEN?f=!0:(f&&(p=!0),f=!1,setTimeout((function(){p=!1}),1e3))}return E.debugEnabled()&&E.debug("init"),e.add({target:i,listeners:h}),{destroy:function(){e.remove({target:i,listeners:h})}}}}}.apply(t,i))||(e.exports=r)},722:function(e,t){var n;void 0===(n=function(){var e="liveBufferControl.";return{BASE:e,SEEK:e+"seek",RATE:e+"rate"}}.apply(t,[]))||(e.exports=n)},7771:function(e,t){var n;void 0===(n=function(){var e="connection.";return{BASE:e,CONNECT:e+"connect",DISCONNECT:e+"disconnect",VIDEO_SOURCE:e+"videoSource",NETWORK_PLAY:e+"networkPlay",NO_SERVER_ERROR:e+"noServerError",MISSING_RTMP_ERROR:e+"missingRtmpError",SERVER_INFO:e+"serverInfo",NO_KEEP_CONNECTION:e+"noKeepConnection",URL:e+"url",NETWORK_UPDATE_SOURCE:e+"networkUpdateSource",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_FAIL:e+"switchStreamFail",SWITCH_STREAM_ABORT:e+"switchStreamAbort"}}.apply(t,[]))||(e.exports=n)},3019:function(e,t){var n;void 0===(n=function(){var e="logicManager.";return{BASE:e,API_PLAY:e+"apiPlay",API_PAUSE:e+"apiPause",NETWORK_CONNECTING:e+"networkConnecting",NETWORK_CONNECTED:e+"networkConnected",NETWORK_DISCONNECTED:e+"networkDisconnected",NETWORK_RECONNECTION_IMMINENT:e+"networkReconnectionImminent",NETWORK_RECONNECTING:e+"networkReconnecting",NETWORK_CONNECTION_ERROR:e+"networkConnectionError",NETWORK_INITIALIZATION_ERROR:e+"networkInitializationError",NETWORK_MAX_RETRY_REACHED:e+"networkMaxRetryReached",NETWORK_ERROR:e+"networkError",NETWORK_STATE_CHANGE:e+"networkStateChange",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_QUALITY:e+"streamQuality",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",STREAM_URL:e+"streamUrl",CONFIG:e+"config",BUFFER_TWEAKS_CREATED:e+"tweaksCreated",PLAYING:e+"playing",BUFFERING:e+"buffering",PLAY_STATS:e+"playStats",APPLICATION_STATE_CHANGE:e+"applicationStateChange",CAN_PLAY:e+"canPlay",CAN_PLAY_THROUGH:e+"canPlayThrough",META_DATA:e+"metaData",UPDATE_SOURCE:e+"updateSource",STREAM_SWITCH:e+"streamSwitch",FRAME_DROP:e+"frameDrop",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM:e+"switchStream",MEDIA_PLAYING:e+"mediaPlaying",TIME_OFFSET:e+"timeOffset",SET_ADAPTION:e+"setAdaption",LOADED_DATA:e+"loadedData",MEDIA_ERROR:e+"mediaError",PUBLIC_EVENT:e+"publicEvent"}}.apply(t,[]))||(e.exports=n)},1683:function(e,t){var n;void 0===(n=function(){return{BASE:"metaData.",RECEIVED:"metaData.received",ERROR:"metaData.error"}}.apply(t,[]))||(e.exports=n)},164:function(e,t){var n;void 0===(n=function(){return{BASE:"source.",STATS:"source.stats",STREAM_SWITCH:"source.streamSwitch"}}.apply(t,[]))||(e.exports=n)},8983:function(e,t){var n;void 0===(n=function(){var e="streamInfo.";return{BASE:e,CREATED:e+"created",UPDATED:e+"updated",MIME_TYPE_UNSUPPORTED:e+"mimetypeUnsupported"}}.apply(t,[]))||(e.exports=n)},3667:function(e,t){var n;void 0===(n=function(){return{BASE:"timeout.",LOADING_TIMEOUT:"timeout.loadingTimeout",BUFFERING_TIMEOUT:"timeout.bufferingTimeout"}}.apply(t,[]))||(e.exports=n)},2450:function(e,t){var n;void 0===(n=function(){var e="visibility.";return{BASE:e,HIDDEN:e+"hidden",VISIBLE:e+"visible"}}.apply(t,[]))||(e.exports=n)},1797:function(e,t,n){var i,r;i=[n(6637),n(3778),n(9583),n(9673),n(594),n(680),n(1376),n(8333),n(8197)],void 0===(r=function(e,t,n,i,r,a,o,s,u){return{create:function(i){var d,c=s.create("FacadePropagator"),l=1,f=!1,p=[{type:r.VOLUME_CHANGE,listener:function(e){e.data.muted!==f?h((f=e.data.muted)?n.MUTE:n.UNMUTE,{volume:l}):e.data.volume!==l&&(l=e.data.volume,h(n.VOLUME_CHANGE,{volume:l}))}},{type:r.QUALITY_STATS,listener:function(e){d||(d={}),d.quality=e.data}},{type:r.PLAY_STATS,listener:function(e){var t,i;d&&d.quality&&(t=d.quality),i&&d.adaptive&&(i=d.adaptive),d=e.data.stats,t&&!d.quality&&(d.quality=t),i&&!d.adaptive&&(d.adaptive=i);var r,a="stats error";try{a=JSON.stringify(d),delete(r=JSON.parse(a)).buffer.update,delete r.buffer.delay.before}catch(e){}h(n.STATS,{stats:r})}},{type:r.PLAYBACK_FINISHED,listener:function(){h(n.PLAYBACK_FINISHED)}},{type:a.META_DATA_RECEIVED,listener:function(e){setTimeout(h.bind(this,n.METADATA,e.data),0)}},{type:a.UPDATE_SOURCE_INIT,listener:function(e){setTimeout(h.bind(this,n.UPDATE_SOURCE_INIT,e.data),0)}},{type:a.UPDATE_SOURCE_SUCCESS,listener:function(e){setTimeout(h.bind(this,n.UPDATE_SOURCE_SUCCESS,e.data),0)}},{type:a.UPDATE_SOURCE_FAIL,listener:function(e){setTimeout(h.bind(this,n.UPDATE_SOURCE_FAIL,e.data),0)}},{type:a.UPDATE_SOURCE_ABORT,listener:function(e){setTimeout(h.bind(this,n.UPDATE_SOURCE_ABORT,e.data),0)}},{type:a.STREAM_INFO,listener:function(e){var t=u.copy(e.data);delete t.streamInfo.mimeType,setTimeout(h.bind(this,n.STREAM_INFO,t),0)}},{type:a.STREAM_INFO_UPDATE,listener:function(e){var t=u.copy(e.data);delete t.streamInfo.mimeType,setTimeout(h.bind(this,n.STREAM_INFO_UPDATE,t),0)}},{type:a.SWITCH_STREAM_INIT,listener:function(e){setTimeout(h.bind(this,n.SWITCH_STREAM_INIT,e.data),0)}},{type:a.SWITCH_STREAM_SUCCESS,listener:function(e){setTimeout(h.bind(this,n.SWITCH_STREAM_SUCCESS,e.data),0)}},{type:a.SWITCH_STREAM_FAIL,listener:function(e){setTimeout(h.bind(this,n.SWITCH_STREAM_FAIL,e.data),0)}},{type:a.SWITCH_STREAM_ABORT,listener:function(e){setTimeout(h.bind(this,n.SWITCH_STREAM_ABORT,e.data),0)}},{type:a.ADAPTIVE_STATS,listener:function(e){d||(d={}),d.adaptive=e.data}},{type:a.SERVER_INFO,listener:function(e){var t={serverInfo:u.copy(e.data.onServerInfo)};delete t.serverInfo.capabilities,delete t.serverInfo.events,delete t.serverInfo.interfaceVersion,t.serverInfo.serverApplicationName=t.serverInfo.serverName,t.serverInfo.serverApplicationVersion=t.serverInfo.serverVersion,delete t.serverInfo.serverName,delete t.serverInfo.serverVersion,setTimeout(h.bind(this,n.SERVER_INFO,t),0)}}],E=[{event:a.META_DATA_ERROR,code:null,message:null,defer:!0},{event:a.MISSING_RTMP_ERROR,code:t.PLAYER.NO_RTMP_URL_SET,message:"No rtmp url set.",defer:!1},{event:a.NO_SERVER_ERROR,code:t.PLAYER.NO_SERVER_SET,message:"No server set.",defer:!1},{event:o.RECONNECTION_CONFIG_INVALID,code:t.NETWORK.RECONNECTION_CONFIG_INVALID,message:null,defer:!0},{event:r.BUFFER_TWEAKS_ERROR,code:t.PLAYER.BUFFER_CONFIG_INVALID,message:null,defer:!1}];function h(e,t){i.emit(e,u.copy(t))}function m(e){var t,n;E.forEach((function(i){i.event===e.name&&(t=i.code?i.code:e.data.code,n=i.message?i.message:e.data.reason,i.defer?setTimeout(g.bind(this,t,n),0):g(t,n))}))}function g(e,t){h(n.ERROR,{code:e,message:t})}return c.debugEnabled()&&c.debug("init"),e.add({target:i,listeners:p}),E.forEach((function(e){i.addListener(e.event,m)})),{destroy:function(){e.remove({target:i,listeners:p}),E.forEach((function(e){i.removeListener(e.event,m)}))}}}}}.apply(t,i))||(e.exports=r)},2909:function(e,t,n){var i,r;i=[n(8333),n(9658),n(6627),n(8197),n(6637),n(5055),n(9336),n(9673),n(680),n(594),n(1376),n(7354),n(722),n(7771),n(3019),n(3667),n(8983),n(1683),n(2450),n(164),n(387),n(4792),n(4963),n(5444),n(4600),n(9665),n(4351),n(8307)],void 0===(r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,p,E,h,m,g,_,b,T,S,y,A,v,R,O,I){"use strict";return{create:function(N){var C,w,D=new t,U=e.create("LogicManager"),P=[],M=[{from:f.SEEK,to:s.SEEK},{from:f.RATE,to:s.SET_RATE},{from:p.CONNECT,to:s.CONNECT},{from:p.DISCONNECT,to:s.DISCONNECT},{from:p.VIDEO_SOURCE,to:s.VIDEO_SOURCE},{from:p.NETWORK_PLAY,to:s.NETWORK_PLAY},{from:p.NETWORK_UPDATE_SOURCE,to:s.NETWORK_UPDATE_SOURCE},{from:p.NO_SERVER_ERROR,to:u.NO_SERVER_ERROR},{from:p.MISSING_RTMP_ERROR,to:u.MISSING_RTMP_ERROR},{from:p.NO_KEEP_CONNECTION,to:u.NO_KEEP_CONNECTION},{from:p.SERVER_INFO,to:u.SERVER_INFO},{from:p.URL,to:u.STREAM_URL},{from:p.UPDATE_SOURCE_INIT,to:u.UPDATE_SOURCE_INIT},{from:p.UPDATE_SOURCE_SUCCESS,to:u.UPDATE_SOURCE_SUCCESS},{from:p.UPDATE_SOURCE_FAIL,to:u.UPDATE_SOURCE_FAIL},{from:p.UPDATE_SOURCE_ABORT,to:u.UPDATE_SOURCE_ABORT},{from:p.SWITCH_STREAM_INIT,to:u.SWITCH_STREAM_INIT},{from:p.SWITCH_STREAM_SUCCESS,to:u.SWITCH_STREAM_SUCCESS},{from:p.SWITCH_STREAM_FAIL,to:u.SWITCH_STREAM_FAIL},{from:p.SWITCH_STREAM_ABORT,to:u.SWITCH_STREAM_ABORT},{from:h.LOADING_TIMEOUT,to:u.LOADING_TIMEOUT},{from:h.BUFFERING_TIMEOUT,to:u.BUFFERING_TIMEOUT},{from:m.CREATED,to:u.STREAM_INFO},{from:m.UPDATED,to:u.STREAM_INFO_UPDATE},{from:m.MIME_TYPE_UNSUPPORTED,to:u.MIME_TYPE_UNSUPPORTED},{from:g.RECEIVED,to:u.META_DATA_RECEIVED},{from:g.ERROR,to:u.META_DATA_ERROR},{from:_.VISIBLE,to:u.DOCUMENT_VISIBLE},{from:_.HIDDEN,to:u.DOCUMENT_HIDDEN},{from:b.STATS,to:u.ADAPTIVE_STATS},{from:b.STREAM_SWITCH,to:u.STREAM_SWITCH}],L=[{from:o.PLAY,to:E.API_PLAY},{from:o.PAUSE,to:E.API_PAUSE},{from:d.BUFFER_TWEAKS_CREATED,to:E.BUFFER_TWEAKS_CREATED},{from:d.PLAY_STATS,to:E.PLAY_STATS},{from:d.PLAYBACK_STARTED,to:E.PLAYING},{from:d.BUFFERING,to:E.BUFFERING},{from:d.CAN_PLAY,to:E.CAN_PLAY},{from:d.CAN_PLAY_THROUGH,to:E.CAN_PLAY_THROUGH},{from:d.PLAYING,to:E.MEDIA_PLAYING},{from:d.FRAME_DROP,to:E.FRAME_DROP},{from:d.VIEWPORT_VISIBLE,to:E.VIEWPORT_VISIBLE},{from:d.VIEWPORT_HIDDEN,to:E.VIEWPORT_HIDDEN},{from:d.TIME_OFFSET,to:E.TIME_OFFSET},{from:d.LOADED_DATA,to:E.LOADED_DATA},{from:d.UPDATE_SOURCE_ABORT,to:E.UPDATE_SOURCE_ABORT},{from:d.UPDATE_SOURCE_FAIL,to:E.UPDATE_SOURCE_FAIL},{from:d.MEDIA_ERROR,to:E.MEDIA_ERROR},{from:c.CONNECTING,to:E.NETWORK_CONNECTING},{from:c.CONNECTED,to:E.NETWORK_CONNECTED},{from:c.DISCONNECTED,to:E.NETWORK_DISCONNECTED},{from:c.DESTROYED,to:E.NETWORK_DISCONNECTED},{from:c.RECONNECTING,to:E.NETWORK_RECONNECTING},{from:c.RECONNECTION_IMMINENT,to:E.NETWORK_RECONNECTION_IMMINENT},{from:c.INITIALIZATION_ERROR,to:E.NETWORK_INITIALIZATION_ERROR},{from:c.ERROR,to:E.NETWORK_ERROR},{from:c.STATE_CHANGE,to:E.NETWORK_STATE_CHANGE},{from:c.RANDOM_ACCESS_POINT,to:E.RANDOM_ACCESS_POINT},{from:c.SERVER_INFO,to:E.SERVER_INFO},{from:c.STREAM_INFO,to:E.STREAM_INFO},{from:c.STREAM_INFO_UPDATE,to:E.STREAM_INFO_UPDATE},{from:c.STREAM_QUALITY,to:E.STREAM_QUALITY},{from:c.META_DATA,to:E.META_DATA},{from:c.UPDATE_SOURCE_SUCCESS,to:E.UPDATE_SOURCE_SUCCESS},{from:c.UPDATE_SOURCE_FAIL,to:E.UPDATE_SOURCE_FAIL},{from:c.UPDATE_SOURCE_ABORT,to:E.UPDATE_SOURCE_ABORT},{from:u.UPDATE_SOURCE_INIT,to:E.UPDATE_SOURCE_INIT},{from:u.STATE_CHANGE,to:E.APPLICATION_STATE_CHANGE},{from:u.STREAM_URL,to:E.STREAM_URL},{from:u.STREAM_SWITCH,to:E.STREAM_SWITCH},{from:s.CONFIG,to:E.CONFIG},{from:s.UPDATE_SOURCE,to:E.UPDATE_SOURCE},{from:s.SWITCH_STREAM,to:E.SWITCH_STREAM},{from:s.SET_ADAPTION,to:E.SET_ADAPTION}],F=[{type:E.CONFIG,listener:function(e){P.push(n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS?y.create(D):S.create(D)),e.data.config.playback.metadata&&P.push(R.create(D))}}],x=[];function k(e){D.emit(E.PUBLIC_EVENT,{event:i.copy(e)})}return function(){for(var e in U.debugEnabled()&&U.debug("init"),l)Object.prototype.hasOwnProperty.call(l,e)&&-1===l.STATS.indexOf(l[e])&&x.push({type:l[e],listener:k});C=a.create(N,D,L),w=a.create(D,N,M),r.add({target:D,listeners:F}),r.add({target:N,listeners:x}),P.push(I.create(D)),P.push(T.create(D)),P.push(v.create(D)),P.push(A.create(D)),P.push(O.create(D))}(),{destroy:function(){for(C.destroy(),C=null,w.destroy(),w=null;P.length;)P.pop().destroy();r.remove({target:D,listeners:F}),r.remove({target:N,listeners:x})}}}}}.apply(t,i))||(e.exports=r)},3036:function(e,t,n){var i,r;i=[n(4556),n(8333),n(6627),n(6637),n(492),n(9673),n(594),n(1376),n(680)],void 0===(r=function(e,t,n,i,r,a,o,s,u){var d="nano",c=[],l=c[0]="connecting",f=c[1]="connected",p=c[2]="firstFragmentReceived",E=c[3]="firstFrameRendered",h=c[4]="playable",m=c[5]="playing",g=t.create("Performance");return{create:function(t,_){var b,T=[],S={},y=null,A=[{type:u.STATE_CHANGE,listener:function(e){switch(e.data.state){case r.PAUSED:S={},y=null}}},{type:a.CONFIG,listener:function(e){b=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS,i.add({target:t,listeners:b?R:v})}}],v=[{type:s.CONNECTING,listener:I},{type:s.CONNECTED,listener:N},{type:s.STREAM_FRAGMENT,listener:D},{type:o.LOADED_DATA,listener:U},{type:o.CAN_PLAY_THROUGH,listener:C},{type:o.PLAYING,listener:w}],R=[{type:o.PLAY,listener:I},{type:o.DURATION_CHANGE,listener:N},{type:o.LOADED_META_DATA,listener:D},{type:o.LOADED_DATA,listener:U},{type:o.CAN_PLAY_THROUGH,listener:C},{type:o.PLAYING,listener:w}];function O(n){var i=[d,_,n].join(".");e&&"function"==typeof e.mark&&-1===T.indexOf(i)&&(e.mark(i),T.push(i)),S[n]||n===m&&(n!==m||-1===[p,E,h].indexOf(y))||(y=n,S[n]=e.now(),g.debug(n+": "+S[n]),n===m&&function(){if(c.forEach((function(e,t){if(void 0===S[e]){S[e]=0;for(var n=t+1,i=c.length;n<i;n+=1)if(void 0!==S[c[n]]){S[e]=S[c[n]];break}}})),c.filter((function(e){return void 0!==S[e]})).length){var e=S[l];for(var n in S)Object.prototype.hasOwnProperty.call(S,n)&&(S[n]=Math.round(S[n]-e));t.emit(u.STARTUP_STATS,{stats:S}),g.debugEnabled()&&g.debug("startup stats: "+JSON.stringify(S))}}())}function I(){O(l)}function N(){O(f)}function C(){O(h)}function w(){O(m)}function D(){O(p)}function U(){O(E)}return i.add({target:t,listeners:A}),{destroy:function(){i.remove({target:t,listeners:A}),i.remove({target:t,listeners:b?R:v})}}}}}.apply(t,i))||(e.exports=r)},6704:function(e,t,n){var i,r;i=[n(6637),n(9583),n(9673),n(594),n(680),n(1376),n(8333)],void 0===(r=function(e,t,n,i,r,a,o){return{create:function(n){var i=o.create("StateMachine"),a=[{type:r.STATE_CHANGE,listener:function(e){var i,r;i=t.STATE_CHANGE,r=e.data,n.emit(i,r)}}];return i.debugEnabled()&&i.debug("init"),e.add({target:n,listeners:a}),{destroy:function(){e.remove({target:n,listeners:a})}}}}}.apply(t,i))||(e.exports=r)},387:function(e,t,n){var i,r;i=[n(8333),n(6627),n(6637),n(7771),n(3019),n(8405),n(492),n(5493),n(8730)],void 0===(r=function(e,t,n,i,r,a,o,s,u){return{create:function(s){var d,c,l,f,p=e.create("Connection"),E=[],h=[],m=a.UNITIALIZED,g=!1,_=!1,b=!1,T=!0,S=!1,y=!1,A=0,v=!1,R=[{type:r.NETWORK_STATE_CHANGE,listener:function(e){p.debug(e.name+": network state change from "+P(m)+" to "+P(e.data.connectionState)),m=e.data.connectionState}},{type:r.SERVER_INFO,listener:function(e){if(l=e.data.onServerInfo,_){var t=l.capabilities,n=l.serverVersion,r=parseFloat(n);-1===t.indexOf("onPlay")&&-1===t.indexOf("onPause")&&(_=!1,s.emit(i.NO_KEEP_CONNECTION,{message:r<1.8?"The keepConnection feature is enabled by the players config, but is not supported by this server version ("+n+"). Use at least server version 1.8.0.0. The feature will be disabled.":"The keepConnection feature is enabled by the players config, but is not enabled by this server ("+n+"). The feature will be disabled."}),T||N())}s.emit(i.SERVER_INFO,e.data)}},{type:r.UPDATE_SOURCE_SUCCESS,listener:O},{type:r.UPDATE_SOURCE_FAIL,listener:function(e){E.length>1&&("update"===e.data.type?E.shift():E.pop()),"update"===e.data.type?s.emit(i.UPDATE_SOURCE_FAIL,{source:S.source,entry:S.entry,rule:S.rule,tag:e.data.tag,count:e.data.count,code:e.data.code,message:e.data.message,type:e.data.type,id:e.data.id}):s.emit(i.SWITCH_STREAM_FAIL,{source:S.source,entry:S.entry,rule:S.rule,tag:e.data.tag,count:e.data.count,code:e.data.code,message:e.data.message,type:e.data.type,id:e.data.id}),S=!1}},{type:r.UPDATE_SOURCE_ABORT,listener:function(e){var t=!1;E.length>1&&("update"===e.data.type?E.shift():E.pop()),"superseded"===e.data.reason&&v&&(t=!0),"update"===e.data.type?"equalsource"===e.data.reason?s.emit(i.UPDATE_SOURCE_SUCCESS,{source:S.source,entry:S.entry,rule:S.rule,tag:e.data.tag,count:e.data.count,type:e.data.type,id:e.data.id}):s.emit(i.UPDATE_SOURCE_ABORT,{source:t?v.source:S.source,entry:t?v.entry:S.entry,rule:t?v.rule:S.rule,tag:e.data.tag,count:e.data.count,reason:e.data.reason,type:e.data.type,id:e.data.id}):s.emit(i.SWITCH_STREAM_ABORT,{source:b?e.data.source:S.source,entry:b?e.data.entry:S.entry,rule:b?e.data.rule:S.rule,tag:e.data.tag,count:e.data.count,reason:"equalsource"===e.data.reason?"equal":e.data.reason,type:e.data.type,id:e.data.id}),t?v=!1:S=!1}},{type:r.CONFIG,listener:function(e){c=e.data.config,d=c.id,g=c.playback.metadata,_=c.playback.keepConnection,T=c.playback.autoplay,b=t.mustUseHLS||c.playback.allowSafariHlsFallback&&t.canUseHLS}},{type:r.STREAM_SWITCH,listener:function(e){var t=e.data.entry,n=e.data.options;if("init"===e.data.type){for(;E.length;)E.pop();return C(t.h5live),void(_&&I())}A+=1,n.tag=n.tag||"",n.count=A,"update"===e.data.type?s.emit(i.UPDATE_SOURCE_INIT,{source:e.data.source,entry:t,rule:e.data.rule,options:n,tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}):s.emit(i.SWITCH_STREAM_INIT,{source:e.data.source,entry:t,rule:e.data.rule,options:n,tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}),y?"update"===e.data.type?s.emit(i.UPDATE_SOURCE_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"frequency",tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}):s.emit(i.SWITCH_STREAM_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"frequency",tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}):b&&S&&"update"===S.type&&"update"!==e.data.type?s.emit(i.SWITCH_STREAM_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"updateProgress",tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}):(y=!0,setTimeout((function(){y=!1}),500),S&&(v=S),S=e.data,"update"===e.data.type?p.debugEnabled()&&p.debug("update source: "+JSON.stringify(e.data.source)):p.debugEnabled()&&p.debug("switch stream: "+JSON.stringify(t)),E.length>1&&E.pop(),C(t.h5live),_&&!T?(p.debugEnabled()&&p.debug("connect to new source with terminating the old one"),N(!0),E.shift(),O({data:{tag:e.data.options.tag,count:A,type:e.data.type,id:e.data.id}}),I()):T?(p.debugEnabled()&&p.debug("connect to new source without terminating the old one"),I(e.data)):(E.shift(),p.debugEnabled()&&p.debug("replaced source"),O({data:{tag:e.data.options.tag,count:A,type:e.data.type,id:e.data.id}})))}},{type:r.API_PLAY,listener:function(){if(p.debugEnabled()&&p.debug("api play"),T=!0,_?(p.debugEnabled()&&p.debug("send network play"),s.emit(i.NETWORK_PLAY)):I(S&&S.options.forcePlay?S:void 0),b){var e=w("hls");s.emit(i.VIDEO_SOURCE,{src:e,type:u.HLS})}}},{type:r.API_PAUSE,listener:function(){p.debugEnabled()&&p.debug("api pause"),T=!1,(!_||S)&&N(),b&&s.emit(i.VIDEO_SOURCE,{src:"",type:u.HLS})}},{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case o.PAUSED:S&&O({data:{tag:S.options.tag,count:S.options.count,type:S.type,id:S.id}})}}},{type:r.CAN_PLAY,listener:function(){S&&b&&(clearTimeout(f),O({data:{tag:S.options.tag,count:S.options.count,type:S.type,id:S.id}}))}}];function O(e){E.length>1&&E.shift(),"update"===e.data.type?s.emit(i.UPDATE_SOURCE_SUCCESS,{source:S.source,entry:S.entry,rule:S.rule,tag:e.data.tag,count:e.data.count,type:e.data.type,id:e.data.id}):s.emit(i.SWITCH_STREAM_SUCCESS,{source:S.source,entry:S.entry,rule:S.rule,tag:e.data.tag,count:e.data.count,type:e.